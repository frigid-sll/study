##### 安装PostgreSQL

- 检查brew：

  ```
  brew doctor
  brew update
  ```

- 安装

  ```
  brew install postgres
  ```

  - 你也可以指定版本:

    ```
    brew install postgres@11.17
    ```

- 启动 PostgreSQL 作为服务使用；

  ```
  brew services start postgresql
  ```

- 停止 PostgreSQL

  ```
  brew services stop postgresql
  ```

- 搭建环境（创建用户和数据库，名字与当前mac用户名字一样）

  ```
  sudo -u postgres createuser -s $USER
  createdb $USER
  ```

  - $(whoami) 用于获取系统用户名
  - -s选项用于授予超级用户权限。
  - Odoo使用psycopg2 Python库来与PostgreSQL数据库建立连接。通过psycopg2库访问PostgreSQL数据库。Odoo使用如下的默认值：
    - 默认psycopg2尝试使用本地连接的当前用户相同的用户名来连接数据库，这会启动无密码认证（在开发环境中这样很好）
    - 本地连接使用域套接字
    - 数据库服务监听5432端口

- 添加环境变量（要添加两个：一个是brew的、一个是PostgreSQL的；需要按照自己的安装目录来）

  ```
  cat ~/.zshrc
  export LC_ALL=en_US.UTF-8
  export LANG=en_US.UTF-8
  export PATH="/opt/homebrew/bin:/opt/homebrew/Cellar/postgresql@14/14.5_5/bin:$PATH"
  
  #使配置生效
  source ~/.zshrc
  ```

- 修改密码

  ```
  psql -c "alter role $(whoami) with password 'newpassword'"
  ```

- 如果想使用不同的数据库用户，则需提供该用户的密码。通过在创建用户时在命令行传递**–P**标记来实现，此时命令行会提示你输入密码。

  - -O指定创建库的所属用户