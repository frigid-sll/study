##### 在秒杀场景下，你可以在下面哪个环节应用 Redis?

- 前端静态页面缓存
- 秒杀商品库存查询和扣减
- 拦截恶意攻击的请求
- 数据库订单异常处理

```
答案：B
题目解析
选项 A、C、D 是秒杀场景中的其他支撑技术，但并不是用 Redis


选项 B，正确
```



##### 对于切片集群来说，数据倾斜是需要关注的问题，以下哪些原因会引起数据倾斜？

- 存在 bigkey
- RDB 快照的生成
- 数据分布不均衡
- Hash Tag 的使用

```
答案：ACD
题目解析
选项 A，正确

选项 B，RDB 快照和数据倾斜没有关系

选项 C，正确

选项 D，正确
```



##### 关于 Redis 6.0 的 ACL 控制机制的描述，哪些是不正确的？

- ACL 支持不同用户用不同密码登录
- ACL 只支持按一类命令的粒度设置访问规则
- ACL 可以禁止客户端调用所有命令操作
- ACL 使用短横线一 和 key 前缀，来表示控制访问的 key

```
答案：BD
题目解析
选项 A，正确

选项 B，ACL 支持对单个命令设置访问控制规则

选项 C，正确

选项 D，ACL 使用波浪线设置被访问控制的 key
```



##### Redis 6.0 开始支持多 10 线程，关于多 10 线程的描述，以下哪个说法是正确的？

- 多 IO 线程可以并行执行 GET、 SET 等请求操作
- Redis 6.0 中默认启用了多 IO 线程
- 可以使用 io-threads 配置项设置多线程的个数
- 可以使用 io-threads-enable 来启用或关闭多线程机制

```
答案：C
题目解析
A 选项，多 IO 线程只是处理网络请求解析

B 选项，默认是关闭的

C 选项，正确

D 选项，使用 io-threads-do-reads 配置项启停多 IO 线程
```



##### 当使用 RESP 2 协议的客户端想要使用 Redis 6.0 中推出的客户端缓存功能，可以使用以下哪种模式？

- direct
- redirect
- broadcast
- 普通模式

```
答案：B
题目解析
选项 A、C、D 无法使用

选项 B，正确
```



##### NVM 是近年来存储设备发展的一个大变化，会对 Redis等系统软件产生巨大影响，以下哪个特性不是非易失存储器件具备的特性？

- 读延迟和 DRAM 一样
- 写延迟接近 DRAM
- 可以持久化保存数据
- 密度大，容量大

```
答案：A
题目解析
选项 A，正确，NVM 读延迟要高于 DRAM，选项答案不是 NVM 特性

选项 B，属于 NVM 特性

选项 C，属于 NVM 特性

选项 D，属于 NVM 特性
```





##### 为了保证数据在主从库间的一致性，我们需要将数据的过期时间设置为绝对时间，可以使用以下哪些命令来进行设置？

- EXPIRE
- PEXPIRE
- EXPIREAT
- PEXPIREAT

```
答案：CD
题目解析
选项 A，该命令设置相对过期时间

选项 B，该命令设置相对过期时间

选项 C，正确

选项 D，正确
```



##### 下面这些关于 Redis 事务机制的描述，哪些是正确的？

- Redis 事务可以保证原子性
- Redis 事务可以保证一致性
- Redis 事务不能保证隔离性
- Redis 事务无法保证持久性

```
答案：BD
题目解析
选项 A，Redis 在事务中有命令语法错误时，无法保证原子性，其他情况可以保证

选项 B，正确

选项 C，Redis 事务可以保证隔离性

选项 D，正确
```



##### 假设一个客户端的ID 号是100，该客户端想使用名为mylock 的 key 作为锁变量，并设置锁变量的过期时间是10s，请问应该使用以下哪个命令来进行加锁操作？

- SET mylock 100 PX 10
- SET mylock 100 PX 10000
- SET mylock 100 NX EX 10
- SET mylock 10 NX EX 100

```
答案：C
题目解析
选项 A，PX 的单位是毫秒，设置的过期时间不对

选项 B，没有使用 NX 选项，如果 mylock 的 key 本身不存在，那么该命令也不会创建 key，导致加锁失败

选项 C，正确

选项 D，EX 的值应该是 10，mylock 的值应该是 100
```



##### 假设我们将 Redis 的 min-slaves-to-write 配置项设置为1，哨兵的 down-after-milliseconds 设置为 15s，哨兵主从切换需要 5s。主库因为某些原因卡住l了18s，那么，min-slaves-max-lag 设置为多少时，可以避免脑裂？

- 15
- 16
- 23
- 33

```
答案：AB
题目解析
选项 A，正确，

选项 B，正确

选项 C，旧主库 18s 后恢复正常，此时还没有超出 23s，而且哨兵还没有切换完成，导致旧主库可能接收写请求

选项 D，旧主库 18s 后恢复正常，此时没有超出 33s，而且哨兵还没有切换完成，导致旧主库可能接收写请求
```



##### 假设有一个业务应用想使用如下代码实现分布式锁，你觉得，这段代码有什么问题吗？

```
SETNX lock_key 1
DO THINGS
DEL lock_key
```

- 没有对锁变量设置过期时间，会导致锁可能一直被持有
- 应该使用 SET 命令加上 NX 选项
- lock_key 这个键值对的键名称应该改为客户端的唯一 ID
- 锁变量可能被并发的客户端释放掉

```
答案：AD
题目解析
选项 A，正确

选项 B，SETNX 和 SET NX 的效果是一样的

选项 C，需要把 lock_key 键值对的值改为客户端唯一 ID，而不是把键改为唯一 ID

选项 D，正确
```



##### 假设有多个客户端同时读取键值对a、 b 的值，并对键值对c的值做加1操作，下面哪些代码片段能保证数据的正确性？

- ```
  GET a
  GET b
  INC c
  ```

- ```
  以下 5 句使用 Lua 脚本实现
  GET a
  GET b
  GET c
  c = c + 1
  SET c
  ```

- ```
  GET a
  GET b
  // 以下三句用 Lua 脚本实现
  GET c
  c = c + 1
  SET c
  ```

- ```
  GET a
  GET b
  // 以下两句用 Lua 脚本实现
  GET c
  c = c + 1
  SET c
  ```

```
答案：ABC
题目解析
选项 A，正确，INCR 命令原子执行，可以保证数据正确性

选项 B，正确，Lua 脚本原子执行，可以保证数据正确性，但是没有必要把 GET a 和 b 也放到脚本中

选项 C，正确

选项 D，SET c 需要和读取 c，以及 c 做加一操作一起执行
```



##### Pika 是一个基于 SSD 实现的大容量键值数据库，下面这些关于 Pika 的说法中，有哪些是正确的？

- Pika 虽然可以实现大容量存储，但是数据类型和Redis 不兼容
- Pika 内部使用 RocksDB 来保存落盘的数据
- Pika 使用多线程来处理客户端请求
- Pika 使用 binlog 机制实现写命令的增量同步，不过，和 Redis 一样，仍然会受内存缓冲区的大小限制

```
答案：BC
题目解析
A 选项，Pika 支持兼容 Redis 的 5 大基本数据类型

B 选项，正确

C 选项，正确

D 选项，Pika 主从同步时，不受缓存区大小限制了
```



##### 下面这些关于 Codis 集群的描述，哪些是正确的？

- Codis 集群默认使用 16384 个 Slot 进行 key 的分配
- 为了保证迁移数据的完整性，Codis 只支持同步迁移
- codis proxy 接收客户端请求，并进行请求转发
- Codis 集群可以使用 etcd 保存集群元数据

```
答案：CD
题目解析
A 选项，Codis 默认使用 1024 个 Slot

B 选项，Codis 支持异步迁移，是为了避免阻塞主线程

C 选项，正确

D 选项，正确
```



##### 当 Redis 用作缓存时，如果同时有大量数据失效，那么此时会发生什么问题？

- 缓存击穿
- 缓存穿透
- 缓存雪崩
- 没有问题

```
答案：C
题目解析
A 选项，击穿是表示单个或少量热点数据失效

B 选项，穿透是指访问的数据既不在缓存，也不在数据库

C 选项，正确

D 选项，题干条件下，会发生缓存雪崩，导致大量请求发送到数据库层，给数据库层带来压力
```



##### 在使用 Redis 作为缓存时，如果有一个应用的负载是对一个大数据集中的所有数据扫描一遍，那么使用下面哪种数据淘汰策略会更加合适？

- allkeys-Iru
- allkeys-Ifu
- allkeys-random
- noeviction

```
答案：B
题目解析
A 选项，该策略按数据访问时效性进行筛选，会导致刚被访问的数据滞留在缓存，无法被及时淘汰，造成缓存污染

B 选项，正确

C 选项，该策略随机选取淘汰的数据，会造成缓存污染

D 选项，该策略不会淘汰数据
```



##### 在应用 Redis 切片集群时，使用了 Hash Tag 对数据进行切片，现有数据的key 是 user:info:(330}， value 是1024，请问切片集群使用数据的哪一部分内容计算 CRC值？

- user:info:(330}
- 1024
- 330
- info

```
答案：C
题目解析
使用 Hash Tag 时，Redis 只会使用花括号内的内容计算 CRC 值，所以选 C，其他选项都不是花括号内的内容。
```



##### 当 Redis 用作只读缓存时，如果数据发生了修改，以下哪个说法是正确的？

- 通过先删除缓存值，后更新数据库值，就可以避免数据不一致问题
- 通过先更新数据库，再删除缓存，就可以避免数据不一致问题
- 在先删除缓存值，后更新数据库时，如果有并发读操作，可以使用重试数据库更新操作，避免数据不一致
- 在先删除缓存值，后更新数据库时，如果有并发读操作，可以使用延迟双删，来应对数据不一致问题

```
答案：D
题目解析
选项 A，删除缓存后，如果数据库没有更新成功，就会导致数据不一致

选项 B，更新数据库后，如果缓存删除失败，就会导致仍然读到旧值

选项 C，重试数据库更新操作是在数据库更新失败情况下的应对方案

选项 D，正确
```



##### Redis 缓存一旦发生缓存击穿，就会导致大量请求发送到数据库层进行处理，可能会导致数据库压力过大而崩溃，以下哪些方法可以应对缓存击穿问题，缓解数据库压力？

- 给数据的过期时间增加随机量，避免同时过期
- 数据库限流
- 在业务应用接入层检查是否有恶意请求
- 不给热点数据设置过期时间

```
答案：BD
题目解析
A 选项，该选项方法是用来应对缓存雪崩的，解决不了击穿问题

B 选项，正确，可以避免压垮数据库

C 选项，该选项方法是用来应对缓存穿透的

D 选项，正确
```



##### 以下哪个命令不属于 Redis 事务机制所需的关键命令？

- MULTI
- SET
- EXEC
- DISCARD

```
答案：B
题目解析
A 选项，是事务机制的关键命令，表示事务开始

B 选项，正确，这是用来设置 key 的 value 值的命令，不属于事务机制的必需命令

C 选项，是事务机制的关键命令，让实例开始实际执行事务

D 选项，是事务机制的关键命令，表示撤销事务操作
```











