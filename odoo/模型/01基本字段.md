##### 语法

```python
class LibraryBook(models.Model):
	name = fields.Field(string=, **kwargs)
```



##### 基本Field类型

| 类型                             | 说明                                                         |
| -------------------------------- | ------------------------------------------------------------ |
| Char(string)                     | 是一个单行文本，唯一位置参数是string字段标签。               |
| Text(string)                     | 是一个多行文本，唯一位置参数是string字段标签。               |
| Selection(selection, string)     | 是一个下拉选择列表。选项位置参数是一个 [(‘value’, ‘Title’),] 元组列表。<br />元组第一个元素是存储在数据库中的值，第二个元素是展示在用户界面中的描述。该列表可由其它模块使用selection_add关键字参数扩展。 |
| Html(string)                     | 存储为文本字段，但有针对用户界面 HTML 内容展示的特殊处理。出于安全考虑，该字段会被清洗，但清洗行为可被重载。 |
| Integer(string)                  | 仅需字段标题字符串参数。                                     |
| Float(string, digits)            | 带有第二个可选参数digits，该字段是一个指定字段精度的(x,y)元组，x 是数字总长，y 是小数位。<br />cost_price = fields.Float('Book Cost', digits='Book Price')可设置模版直接调用 |
| Monetary(string, currency_field) | 与浮点字段类似，但带有货币的特殊处理。第二个参数currency_field用于存储所使用货币，默认应传入currency_id字段。<br />结合该字段使用currency_id = fields.Many2one( 'res.currency', string='Currency') |
| Date(string)和Datetime(string)   | 字段只需一个字符串文本位置参数。Datetime显示时分秒           |
| Boolean(string)                  | 值为True 或False，可传入一个字符串文本位置参数。             |
| Binary(string)                   | 存储文件类二进制文件，只需一个字符串文本位置参数。它可由Python使用 base64编码字符串进行处理。 |



**特殊字段属性**

| 属性                           | 说明                                                         |
| ------------------------------ | ------------------------------------------------------------ |
| name                           | (通常为 Char)默认作为记录的显示名称。通过是一个 Char，但也可以是 Text 或Many2one字段类型。用作显示名的字段可修改为_rec_name模型属性。 |
| active                         | (Boolean型)允许我们关闭记录。带有active=False的记录会自动从查询中排除掉。可在当前上下文中添加{‘active_test’: False} 来关闭这一自动过滤。可用作记录存档或假删除（soft delete）。 |
| state                          | (Selection类型) 表示记录生命周期的基本状态。它允许使用states字段属性来根据记录状态以具备不同的 UI 行为。<br />动态修改视图：字段可在特定记录状态下变为隐藏（invisible），只读(readonly)，必填（required）。 |
| parent_id和parent_path Integer | (Char型)对于父子层级关系具有特殊意义。本文后续会进行讨论。   |

有些字段在Odoo模型中默认添加，因此我们**不应在字段中使用这些名称**。这些是记录自动生成的标识符的id字段以及一些审计日志字段，如下所示：

- create_date是记录创建的时间戳
- create_uid是创建该记录的用户
- write_date是最近记录的编辑时间戳
- write_uid是最后编辑记录的用户

这些日志字段的自动创建可通过设置模型属性**_log_access=False**来进行禁用。



##### 常用字段属性

| 属性              | 说明                                                         |
| ----------------- | ------------------------------------------------------------ |
| string            | 是字段的默认标签，在用户界面中使用。如未传入，ORM获取类中的字段名称大写作为默认名称 |
| default           | 设置字段默认值。可以是具体值（如 active字段中的default=True），或是可调用引用，有名函数或匿名函数均可。 |
| help              | 提供 UI 中鼠标悬停字段向用户显示的提示文本                   |
| readonly          | （布尔值，默认为False）readonly=True会使用户界面中的字段默认不可编辑。仅针对用户界面设置。 |
| required          | （布尔值，默认为False）required=True使得用户界面中字段默认必填 |
| index             | （布尔值，默认为False）index=True为字段添加数据库索引，让搜索更快速，但同时也会部分降低写操作速度。 |
| copy              | copy=False让字段在使用 ORM copy()方法复制字段时忽略该字段。除 to-many 关联字段外，其它字段值默认会被复制。 |
| groups            | groups可限制字段仅对一些组可访问并可见。值为逗号分隔的安全组XML ID列表，如groups=’base.group_user,base.group_system’。 |
| states            | 传入依赖 state字段值的 UI 属性的字典映射值。可用属性有readonly, required和invisible，如states={‘done’:[(‘readonly’,True)]}。 |
| oldname           | (string) 该字段的先前名称，以便ORM可以在迁移时自动重命名     |
| sanitize          | 标记用于HTML字段，提取不安全标签中的内容。使用它会对输入进行全局清理。 |
| company_dependent | 标记让该字段按公司/租户存储不同值。它取代了已弃用的Property字段类型。 |



##### 文本字段（Char, Text和Html）特有属性

| 属性        | 说明                                                         |
| ----------- | ------------------------------------------------------------ |
| size (Char) | 设置最大允许尺寸。无特殊原因建议不要使用，例如可用于带有最大允许长度的社保账号。 |
| translate   | 使用的字段内容可翻译，带有针对不同语言的不同值。             |
| trim        | （默认值为 True），启动在网络客户端中自动去除周围的空格。可通过设置trim=false来取消。 |

##### 如果需要更细粒度的HTML清理控制，可以使用一些其它关键字，仅在启用sanitize时生效：

- sanitize_tags=True删除白名单列表以外的标签（默认项）

- sanitize_attributes=True删除白名单列表以外的标签属性

- sanitize_style=True删除白名单列表以外的样式属性

- strip_style=True删除所有样式元素

- strip_class=True删除所有class属性

  ```
  description = fields.Html('Description', sanitize=True, strip_style=False)
  ```



##### 示例代码

```python
class Book(models.Model):
...
    # String fields
    name = fields.Char('Title', required=True)
    isbn = fields.Char('ISBN')
    book_type = fields.Selection(
        [('paper', 'Paperback'),
        ('hard', 'Hardcover'),
        ('electronic', 'Electronic'),
        ('other', 'Other')],
        'Type')
    notes = fields.Text('Internal Notes')
    descr = fields.Html('Description')
 
    # Numeric fields:
    copies = fields.Integer(default=1)
    avg_rating = fields.Float('Average Rating', (3,2))
    price = fields.Monetary('Price', 'currency_id')
    currency_id = fields.Many2one('res.currency') # price helper
 
    # Date and time fields
    date_published = fields.Date()
    last_borrow_date = fields.Datetime(
        'Last Borrowed On',
        default=lambda self: fields.Datetime.now())
 
    # Other fields
    active = fields.Boolean('Active?', default=True)
    image = fields.Binary('Cover')

```





```
&#8197;四分之一中文空格
&#8194;中文半角空格
&#12288;、&#8195;中文全角空格
&#32;英文半角空格
&#160;、&#xA0;、 &nbsp;no-break space （英文半角空格，不换行）
```

