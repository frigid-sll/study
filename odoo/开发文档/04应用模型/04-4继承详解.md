##### ä½¿ç”¨ç»§æ‰¿å‘æ¨¡å‹æ·»åŠ åŠŸèƒ½

Odooä¸€ä¸ªæœ€é‡è¦çš„åŠŸèƒ½æ˜¯æ¨¡å—æ’ä»¶å¯ä»¥ç»§æ‰¿å…¶å®ƒæ¨¡å—æ’ä»¶ä¸­å®šä¹‰çš„åŠŸèƒ½ï¼Œè€Œåˆæ— éœ€ç¼–è¾‘åŸåŠŸèƒ½ä¸­çš„ä»£ç ã€‚å¯ä»¥æ˜¯æ·»åŠ å­—æ®µæˆ–æ–¹æ³•ï¼Œä¿®æ”¹å·²æœ‰å­—æ®µæˆ–ç»§æ‰¿å·²æœ‰æ–¹æ³•æ¥æ‰§è¡Œé¢å¤–çš„é€»è¾‘ã€‚

æ ¹æ®å®˜æ–¹æ–‡æ¡£æ‰€è¯´ï¼ŒOdooæä¾›ä¸‰ç§ç±»å‹çš„ç»§æ‰¿ï¼š

- ç±»ç»§æ‰¿ï¼ˆæ‰©å±•ï¼‰ï¼š
  - ä¿®æ”¹ç»§æ‰¿è¡¨çš„ç»“æ„
  - æ·»åŠ å­—æ®µç­‰
  - ä¸ä¼šæ–°å»ºå­è¡¨

- åŸå‹ç»§æ‰¿ï¼š
  - ä¼šæ–°å»ºå­è¡¨ï¼Œç»§æ‰¿æ‰€æœ‰å­—æ®µ
  - çˆ¶è¡¨æˆ–å­è¡¨è¿›è¡Œå¢åŠ æˆ–ä¿®æ”¹æ•°æ®äº’ä¸å½±å“
  - ä½†çˆ¶è¡¨ä¿®æ”¹å­—æ®µåï¼Œè¿™ä¸ªå­è¡¨ä¹Ÿä¼šä¿®æ”¹å­—æ®µå
  - å¯ä»¥æ–°å¢çˆ¶è¡¨ä¸­æ²¡æœ‰çš„æ–°å­—æ®µ

- ä»£ç†ç»§æ‰¿ï¼š
  - ä¼šæ–°å»ºå­è¡¨ï¼Œåªç»§æ‰¿æŸäº›å­—æ®µ
    - åœ¨ä½¿ç”¨ç»§æ‰¿çš„å­—æ®µçš„æ—¶å€™å¯ä»¥é€‰æ‹©çˆ¶è¡¨ä¸­è¿™ä¸ªå­—æ®µå·²æœ‰çš„å€¼ï¼Œä¹Ÿå¯ä»¥æ–°å»ºçˆ¶è¡¨ä¸­æ²¡æœ‰çš„å€¼
    - åœ¨æ–°çš„å­è¡¨ä¸­åˆ›å»ºæ•°æ®ï¼Œå¦‚æœç»§æ‰¿å­—æ®µçš„å€¼åœ¨çˆ¶è¡¨ä¸­æ²¡æœ‰ï¼Œé‚£ä¹ˆçˆ¶è¡¨ä¹Ÿä¼šæ–°å»ºä¸€ä¸ªè¿™ä¸ªå­—æ®µçš„æ•°æ®ã€‚

  - å¯ä»¥æ–°å¢çˆ¶è¡¨ä¸­æ²¡æœ‰çš„æ–°å­—æ®µ
- æŠ½è±¡ç»§æ‰¿ï¼š
  - å¤šä¸ªæ¨¡å‹æ‹¥æœ‰åŒä¸€ä¸ªå­—æ®µ
  - è¯¥å­—æ®µå¯ä»¥å®ç°æŸä¸ªåŠŸèƒ½
  - ä¸åŒæ¨¡å‹ä¹‹é—´çš„åŒä¸€ä¸ªå­—æ®µå†…å®¹äº’ä¸å½±å“




æˆ‘ä»¬ä¼šé€šè¿‡ä¸åŒçš„å°èŠ‚å­¦ä¹ è¿™äº›ç»§æ‰¿ã€‚æœ¬èŠ‚ä¸­æˆ‘ä»¬å­¦ä¹ ç±»å‹ç»§æ‰¿ï¼ˆæ‰©å±•ï¼‰ã€‚ç”¨äºå¯¹å·²æœ‰æ¨¡å‹æ·»åŠ æ–°å­—æ®µæˆ–æ–¹æ³•ã€‚

æˆ‘ä»¬å°†ç»§æ‰¿å†…ç½®çš„å®¢æˆ·æ¨¡å‹res.partneræ¥æ·»åŠ æ‰€è‘—ä¹¦æ•°é‡çš„è®¡ç®—å­—æ®µã€‚åŒ…å«å¯¹å·²æœ‰æ¨¡å‹æ·»åŠ ä¸€ä¸ªå­—æ®µæˆ–ä¸€ä¸ªæ–¹æ³•ã€‚





##### ç±»ç»§æ‰¿ï¼ˆæ‰©å±•ï¼‰

æˆ‘ä»¬å°†ç»§æ‰¿å†…ç½®çš„Partneræ¨¡å‹ã€‚è¯»è€…å¯èƒ½è¿˜è®°å¾—æˆ‘ä»¬åœ¨æœ¬ç« çš„*å‘æ¨¡å‹æ·»åŠ å…³è”å­—æ®µ*ä¸€èŠ‚ä¸­ç»§æ‰¿è¿‡res.partnerã€‚ä¸ºäº†ç®€åŒ–è®²è§£ï¼Œæˆ‘ä»¬å°†å¤ç”¨ models/library_book.pyä»£ç æ–‡ä»¶ä¸­çš„res.partneræ¨¡å‹ï¼š

- é¦–å…ˆï¼Œæˆ‘ä»¬å°†ç¡®ä¿åœ¨Partneræ¨¡å‹ä¸­æœ‰authored_book_idsåå‘å…³è”å¹¶æ·»åŠ è®¡ç®—å­—æ®µï¼š

  ```python
  class ResPartner(models.Model):
       _inherit = 'res.partner'
       _order = 'name'
       authored_book_ids = fields.Many2many(
          'library.book', string='Authored Books')
       count_books = fields.Integer( 'Number of Authored Books',
          compute='_compute_count_books' )
  ```

- ç„¶åï¼Œæ·»åŠ éœ€è¦ç”¨äºè®¡ç®—å›¾ä¹¦æ•°é‡çš„æ–¹æ³•

  ```python
  # ...
  from odoo import api # if not already imported
  # class ResPartner(models.Model):
       # ...
       @api.depends('authored_book_ids')
       def _compute_count_books(self):
           for r in self:
              r.count_books = len(r.authored_book_ids)
  ```

- æœ€åï¼Œæˆ‘ä»¬éœ€è¦å‡çº§è¿™ä¸ªæ’ä»¶æ¨¡å—æ¥è®©ä¿®æ”¹ç”Ÿæ•ˆã€‚



##### è¿è¡ŒåŸç†â€¦

åœ¨æ¨¡å‹ç±»é€šè¿‡_inheritå±æ€§è¿›è¡Œå®šä¹‰æ—¶ï¼Œå®ƒå‘æ‰€ç»§æ‰¿æ¨¡å‹æ·»åŠ äº†ä¿®æ”¹ï¼Œè€Œæ²¡æœ‰è¿›è¡Œæ›¿æ¢ã€‚

è¿™æ„å‘³ç€åœ¨ç»§æ‰¿ç±»ä¸­å®šä¹‰çš„å­—æ®µä¼šåœ¨çˆ¶çº§æ¨¡å‹ä¸­æ–°å¢æˆ–ä¿®æ”¹ã€‚åœ¨æ•°æ®åº“å±‚ï¼ŒORMå¯¹åŒä¸€å¼ æ•°æ®è¡¨æ·»åŠ å­—æ®µã€‚

å­—æ®µä¹Ÿè¢«å¢é‡ä¿®æ”¹ã€‚è¡¨ç¤ºå¦‚æœè¯¥å­—æ®µåœ¨çˆ¶ç±»ä¸­å·²å­˜åœ¨ï¼Œä»…ä¿®æ”¹åœ¨ç»§æ‰¿ç±»ä¸­å£°æ˜çš„å±æ€§ï¼Œå…¶å®ƒçš„ä¿æŒåŸæœ‰çˆ¶ç±»ä¸­çš„å†…å®¹ä¸å˜ã€‚

åœ¨ç»§æ‰¿ç±»ä¸­å®šä¹‰çš„æ–¹æ³•æ›¿æ¢çˆ¶ç±»ä¸­çš„æ–¹æ³•ã€‚å¦‚æœä½ ä¸é€šè¿‡superè°ƒç”¨è§¦å‘çˆ¶çº§æ–¹æ³•ï¼Œé‚£ä¹ˆçˆ¶çº§ç‰ˆæœ¬çš„æ–¹æ³•åˆ™ä¸ä¼šè¢«è°ƒç”¨ï¼Œæˆ‘ä»¬ä¹Ÿå°±ä¸æ‹¥æœ‰è¯¥é¡¹åŠŸèƒ½ã€‚å› æ­¤ï¼Œé€šè¿‡ç»§æ‰¿åœ¨å·²æœ‰æ–¹æ³•ä¸­æ·»åŠ æ–°é€»è¾‘æ—¶ï¼Œåº”åŒ…å«ä¸€ä¸ªå¸¦æœ‰superçš„è¯­å¥æ¥è°ƒç”¨å…¶çˆ¶ç±»ä¸­çš„æ–¹æ³•ã€‚è¿™éƒ¨åˆ†åœ¨[ç¬¬äº”ç«  åŸºæœ¬æœåŠ¡ç«¯å¼€å‘](https://alanhou.org/odoo-14-basic-server-side-development/)ä¸­åšè¿›ä¸€æ­¥çš„è®²è§£ã€‚

> ğŸ“æœ¬èŠ‚ä¼šå‘å·²æœ‰æ¨¡å‹æ–°å¢å­—æ®µã€‚å¦‚æœæƒ³åœ¨å·²æœ‰è§†å›¾ï¼ˆç”¨æˆ·ç•Œé¢ï¼‰æ·»åŠ è¿™äº›æ–°å­—æ®µçš„è¯ï¼Œå‚è§[ç¬¬ä¹ç«  åç«¯è§†å›¾](https://alanhou.org/odoo-14-backend-views/)ä¸­çš„*ä¿®æ”¹å·²æœ‰è§†å›¾ â€“ è§†å›¾ç»§æ‰¿*ä¸€èŠ‚ã€‚

##### æ‰©å±•çŸ¥è¯†â€¦

é€šè¿‡`_inherit`ç»å…¸ç»§æ‰¿ï¼Œä¹Ÿå¯ä»¥å°†çˆ¶çº§æ¨¡å‹çš„åŠŸèƒ½æ‹·è´åˆ°ä¸€ä¸ªå…¨æ–°çš„æ¨¡å‹ä¸­ã€‚è¿™é€šè¿‡æ·»åŠ ä¸€ä¸ªåœ¨å¸¦æœ‰ä¸åŒæ ‡è¯†ç¬¦çš„_nameç±»å±æ€§æ¥å®ç°ã€‚ä»¥ä¸‹æ˜¯ä¸€ä¸ªç¤ºä¾‹ï¼š

```python
class LibraryMember(models.Model):
     _inherit = 'res.partner'
     _name = 'library.member'
```

æ–°æ¨¡å‹æœ‰å…¶è‡ªå·±çš„æ•°æ®è¡¨ï¼ŒåŒ…å«å®Œå…¨ç‹¬ç«‹äºres.partnerçˆ¶æ¨¡å‹çš„è‡ªèº«æ•°æ®ã€‚å› å…¶ä»ç»§æ‰¿Partneræ¨¡å‹ï¼Œæ­¤åçš„ä»»æ„ä¿®æ”¹ä¹Ÿä¼šå½±å“åˆ°æ–°æ¨¡å‹ã€‚

åœ¨å®˜æ–¹æ–‡æ¡£ä¸­ï¼Œè¿™è¢«ç§°ä¸ºåŸå‹ç»§æ‰¿ï¼Œä½†åœ¨å®è·µä¸­é²œæœ‰ä½¿ç”¨ã€‚åŸå› åœ¨äºä»£ç†ç»§æ‰¿é€šå¸¸å¯ä»¥æ›´é«˜æ•ˆçš„æ–¹å¼æ»¡è¶³äº†è¿™ä¸€éœ€æ±‚ï¼Œä¹Ÿæ— éœ€å¤åˆ¶æ•°æ®ç»“æ„ã€‚å‚è§æœ¬ç« ä¸­çš„*ä½¿ç”¨ä»£ç†ç»§æ‰¿å°†åŠŸèƒ½æ‹·è´è‡³å¦ä¸€ä¸ªæ¨¡å‹*ä¸€èŠ‚äº†è§£æ›´å¤šå†…å®¹ã€‚





##### åŸå‹ç»§æ‰¿

åŸå‹ç»§æ‰¿é€šè¿‡åŒæ—¶ä½¿ç”¨`_name`å’Œ`_inherit `å±æ€§æ¥å®ç°ã€‚æ‰§è¡Œå¦‚ä¸‹æ­¥éª¤æ¥ç”Ÿæˆå¯¹library.bookæ¨¡å‹çš„æ‹·è´ï¼š

- åœ¨/my_library/models/ç›®å½•ä¸‹æ–°å»ºä¸€ä¸ªlibrary_book_copy.py æ–‡ä»¶ï¼š

- åœ¨library_book_copy.py æ–‡ä»¶ä¸­æ·»åŠ å¦‚ä¸‹ä»£ç ï¼š

  ```python
  from odoo import models, fields, api
   
  class LibraryBookCopy(models.Model):
      _name = 'library.book.copy'
      _inherit = 'library.book'
      _description = "Library Book's Copy"
  ```

- åœ¨/my_library/models/`__init__.py`æ–‡ä»¶å¯¼å…¥ä¸€æ¡æ–°çš„æ–‡ä»¶å¼•ç”¨ã€‚ä¿®æ”¹åçš„__init__.pyæ–‡ä»¶å†…å®¹å¦‚ä¸‹

  ```python
  from . import library_book
  from . import library_book_categ
  from . import library_book_copy
  ```

æœ€åï¼Œæˆ‘ä»¬éœ€è¦å‡çº§æ’ä»¶æ¨¡å—æ¥è®©ä¿®æ”¹ç”Ÿæ•ˆã€‚æŸ¥çœ‹æ–°æ¨¡å‹å®šä¹‰ï¼Œå¯è®¿é—®Settings > Technical > Database Structure > Modelsèœå•ã€‚åœ¨è¿™é‡Œä¼šçœ‹åˆ°ä¸€ä¸ªæ–°çš„æ¨¡å‹library.book.copyã€‚

> ğŸ“å°è´´å£«ï¼šè¦æƒ³æŸ¥çœ‹æ–°æ¨¡å‹çš„èœå•å’Œè§†å›¾ï¼Œéœ€è¦æ·»åŠ è§†å›¾åŠèœå•çš„XMLå®šä¹‰ã€‚æ›´å¤šæœ‰å…³èœå•å’Œè§†å›¾çš„ç›¸å…³å†…å®¹ï¼Œå‚è§[ç¬¬ä¸‰ç«  åˆ›å»ºOdooæ’ä»¶æ¨¡å—](https://alanhou.org/odoo-14-creating-odoo-add-on-modules/)ä¸­çš„*æ·»åŠ èœå•é¡¹å’Œè§†å›¾*ä¸€èŠ‚ã€‚



##### è¿è¡ŒåŸç†â€¦

èƒ½è¿‡åŒæ—¶ä½¿ç”¨ç±»å±æ€§`_name`å’Œ`_inherit`ï¼Œå¯ä»¥æ‹·è´æ¨¡å‹çš„å®šä¹‰ã€‚åœ¨æ¨¡å‹ä¸­ä½¿ç”¨è¿™ä¸¤ä¸ªå±æ€§æ—¶ï¼ŒOdooä¼šæ‹·è´`_inherit`çš„æ¨¡å‹å®šä¹‰ï¼Œåˆ›å»ºä¸€ä¸ªå¸¦æœ‰`_name`å±æ€§çš„æ–°æ¨¡å‹ã€‚

æœ¬ä¾‹ä¸­ï¼ŒOdooä¼šæ‹·è´library.bookæ¨¡å‹çš„å®šä¹‰ï¼Œåˆ›å»ºä¸€ä¸ªæ–°æ¨¡å‹library.book.copyã€‚æ–°çš„library.book.copyæ¨¡å‹æœ‰ä¸€ä¸ªåŒ…å«è‡ªèº«æ•°æ®çš„æ•°æ®è¡¨ï¼Œä¸çˆ¶çº§æ¨¡å‹library.bookå®Œå…¨ç‹¬ç«‹å¼€æ¥ã€‚å› å…¶ä¾ç„¶ç»§æ‰¿è¯¥çˆ¶æ¨¡å‹ï¼Œåç»­çš„å˜æ›´è¿˜æ˜¯ä¼šå½±å“åˆ°è¿™ä¸€æ–°æ¨¡å‹ã€‚

åŸå‹ç»§æ‰¿å¤åˆ¶çˆ¶ç±»ä¸­çš„æ‰€æœ‰å±æ€§ã€‚ä¼šæ‹·è´å­—æ®µã€å±æ€§å’Œæ–¹æ³•ã€‚å¦‚æœæƒ³åœ¨å­ç±»ä¸­è¿›è¡Œä¿®æ”¹ï¼Œåªéœ€åœ¨å­ç±»ä¸­æ·»åŠ æ–°çš„å®šä¹‰ã€‚ä¾‹å¦‚ï¼Œlibrary.bookæ¨¡å‹æœ‰ä¸€ä¸ª_name_getæ–¹æ³•ã€‚å¦‚æœå¸Œæœ›åœ¨å­ç±»ä¸­ä½¿ç”¨ä¸åŒç‰ˆæœ¬çš„_name_getï¼Œéœ€è¦åœ¨library.book.copyæ¨¡å‹ä¸­é‡æ–°å®šä¹‰è¯¥æ–¹æ³•ã€‚

> âš ï¸è­¦å‘Šï¼šåœ¨_nameå’Œ_inheritå±æ€§ä¸­ä½¿ç”¨åŒä¸€ä¸ªæ¨¡å‹åç§°æ—¶åŸå‹ç»§æ‰¿æ— æ³•ç”Ÿæ•ˆã€‚å¦‚æœåœ¨_nameå’Œ_inheritå±æ€§ä¸­ç¡®å®ä½¿ç”¨äº†ç›¸åŒçš„æ¨¡å‹åç§°ï¼Œä¼šå’Œæ™®é€šæ‰©å±•ç»§æ‰¿è¡¨ç°ä¸€è‡´ã€‚



##### æ‰©å±•çŸ¥è¯†â€¦

å®˜æ–¹æ–‡æ¡£ç§°å…¶ä¸ºåŸå‹ç»§æ‰¿ï¼Œä½†å®é™…å¼€å‘ä¸­å¾ˆå°‘ä½¿ç”¨åˆ°ã€‚åŸå› æ˜¯ä»£ç†ç»§æ‰¿é€šå¸¸ä¼šä»¥æ›´é«˜æ•ˆçš„æ–¹å¼æ»¡è¶³ç›¸åº”çš„éœ€æ±‚ï¼Œè€Œåˆæ— éœ€å¤åˆ¶æ•°æ®ç»“æ„ã€‚æ›´å¤šç›¸å…³ä¿¡æ¯ï¼Œå‚è§ä¸‹ä¸€å°èŠ‚*ä½¿ç”¨ä»£ç†ç»§æ‰¿å°†åŠŸèƒ½æ‹·è´è‡³å¦ä¸€ä¸ªæ¨¡å‹*ã€‚





##### ä»£ç†ç»§æ‰¿

ç¬¬ä¸‰ç§ç»§æ‰¿ç±»å‹æ˜¯ä»£ç†ç»§æ‰¿ã€‚ä½¿ç”¨çš„ä¸æ˜¯`_inherit`ï¼Œè€Œæ˜¯`_inherits`ç±»å±æ€§ã€‚

- æœ‰æ—¶æˆ‘ä»¬ä¸è¦ä¿®æ”¹å·²æœ‰æ¨¡å‹ï¼Œå¸Œæœ›æ ¹æ®å·²æœ‰æ¨¡å‹åˆ›å»ºä¸€ä¸ªæ–°æ¨¡å‹æ¥ä½¿ç”¨åŸæœ‰åŠŸèƒ½ã€‚
- è¿™æ—¶å¯ä»¥é€šè¿‡æ‹·è´åŸå‹ç»§æ‰¿ä¸­çš„æ¨¡å‹å®šä¹‰ï¼Œä½†ä¼šå¯¼è‡´é‡å¤çš„æ•°æ®ç»“æ„ã€‚
- å¦‚æœå¸Œæœ›æ‹·è´æ¨¡å‹å®šä¹‰è€Œåˆä¸å¤åˆ¶æ•°æ®ç»“æ„ï¼Œé‚£ä¹ˆç­”æ¡ˆå°±æ˜¯Odooçš„ä»£ç†ç»§æ‰¿ï¼Œä½¿ç”¨_inheritsæ¨¡å‹å±æ€§ï¼ˆæ³¨æ„è¿™é‡Œå¤šä¸€ä¸ª sï¼‰ã€‚



ä¼ ç»Ÿç»§æ‰¿ä¸é¢å‘å¯¹è±¡ç¼–ç¨‹çš„æ¦‚å¿µæœ‰å¾ˆå¤§ä¸åŒã€‚è€Œä»£ç†ç»§æ‰¿åˆ™ä¸å…¶ç›¸ä¼¼ï¼Œå…¶ä¸­å¯åˆ›å»ºä¸€ä¸ªæ–°çš„æ¨¡å‹æ¥åŒ…å«çˆ¶çº§æ¨¡å‹ä¸­çš„åŠŸèƒ½ã€‚å®ƒè¿˜æ”¯æŒå¤šæ€ç»§æ‰¿ï¼Œè¿™æ—¶ä»ä¸¤ä¸ªæˆ–å¤šä¸ªå…¶å®ƒçš„æ¨¡å‹ä¸­è¿›è¡Œç»§æ‰¿ã€‚

æˆ‘ä»¬çš„å›¾ä¹¦é¦†ä¸­å·²ç»æœ‰ä¹¦äº†ã€‚æ˜¯æ—¶å€™ä¿®æ”¹è®©å›¾ä¹¦é¦†ä¹Ÿæ‹¥æœ‰ä¼šå‘˜äº†ã€‚å¯¹äºå›¾ä¹¦ä¼šå‘˜ï¼Œæˆ‘ä»¬éœ€è¦Partneræ¨¡å‹ä¸­çš„æ‰€æœ‰èº«ä»½å’Œåœ°å€æ•°æ®ï¼Œä¹Ÿä¼šæƒ³è¦ä¿ç•™ä¸€äº›æœ‰å…³ä¼šå‘˜çš„ä¿¡æ¯ï¼šèµ·å§‹æ—¥æœŸã€ç»“æŸæ—¥æœŸå’Œä¼šå‘˜å¡å·ã€‚

å‘Partneræ¨¡å‹æ·»åŠ è¿™äº›å­—æ®µä¸æ˜¯æœ€å¥½çš„æ–¹æ¡ˆï¼Œå› ä¸ºå¯¹äºéä¼šå‘˜çš„æˆå‘˜ä»¬æ— éœ€ä½¿ç”¨åˆ°è¿™äº›ã€‚ä½¿ç”¨ä¸€ä¸ªå¸¦æœ‰é¢å¤–å­—æ®µçš„æ–°æ¨¡å‹ç»§æ‰¿Partneræ¨¡å‹åˆ™ä¼šéå¸¸å¥½ã€‚

##### å¦‚ä½•å®ç°â€¦

æ–°å›¾ä¹¦ä¼šå‘˜æ¨¡å‹åº”æœ‰è‡ªå·±çš„ç‹¬ç«‹Pythonä»£ç æ–‡ä»¶ï¼Œä½†ä¸ºä¿æŒè®²è§£å°½å¯èƒ½ç®€å•ï¼Œæˆ‘ä»¬å°†å¤ç”¨models/library_book.pyæ–‡ä»¶ï¼š

- æ·»åŠ æ–°æ¨¡å‹ç»§æ‰¿res.partner

  ```python
  class LibraryMember(models.Model):
       _name = 'library.member'
       _inherits = {'res.partner': 'partner_id'}
       partner_id = fields.Many2one(
           'res.partner',
           ondelete='cascade')
  ```

- æ¥ä¸‹æ¥ï¼Œæˆ‘ä»¬å°†æ·»åŠ é’ˆå¯¹å›¾ä¹¦ä¼šå‘˜çš„å­—æ®µ

  ```python
  # class LibraryMember(models.Model):
       # ...
       date_start = fields.Date('Member Since')
       date_end = fields.Date('Termination Date')
       member_number = fields.Char()
       date_of_birth = fields.Date('Date of birth')
  ```

- æ­¤æ—¶ï¼Œæˆ‘ä»¬åº”å‡çº§è¯¥æ’ä»¶æ¨¡å‹æ¥è®©ä¿®æ”¹ç”Ÿæ•ˆã€‚



##### è¿è¡ŒåŸç†â€¦

`_inherits`æ¨¡å‹å±æ€§è®¾ç½®æˆ‘ä»¬æƒ³è¦ç»§æ‰¿çš„çˆ¶çº§æ¨¡å‹ã€‚æœ¬ä¾‹ä¸­åªæœ‰ä¸€ä¸ª â€“ res.partneræ¨¡å‹ã€‚

- å®ƒçš„å€¼æ˜¯ä¸€ä¸ªé”®å€¼å¯¹å­—å…¸ï¼Œé”®æ˜¯è¢«ç»§æ‰¿çš„æ¨¡å‹ï¼Œè€Œå€¼æ˜¯ç”¨äºå…³è”å®ƒä»¬çš„å­—æ®µåã€‚
- è¿™äº›æ˜¯æˆ‘ä»¬å¿…é¡»åŒæ—¶åœ¨æ¨¡å‹ä¸­å®šä¹‰çš„Many2oneå­—æ®µã€‚æœ¬ä¾‹ä¸­ï¼Œpartner_idæ˜¯ç”¨äºå…³è”çˆ¶çº§æ¨¡å‹Partnerçš„å­—æ®µã€‚



ä¸ºæ›´å¥½ç†è§£å®ƒå¦‚ä½•è¿è¡Œï¼Œæˆ‘ä»¬æ¥çœ‹åœ¨æ–°å»ºä¼šå‘˜æ—¶æ•°æ®åº“çº§åˆ«ä¸Šä¼šå‘ç”Ÿä»€ä¹ˆï¼š

- åœ¨res_partnerè¡¨ä¸­æ–°å»ºä¸€æ¡è®°å½•
- åœ¨library_memberè¡¨ä¸­æ–°å»ºä¸€æ¡è®°å½•
- library_memberè¡¨ä¸­çš„partner_idå­—æ®µè®¾ç½®ä¸ºæ‰€åˆ›å»ºçš„res_partnerè®°å½•çš„id



ä¼šå‘˜è®°å½•è‡ªåŠ¨å…³è”åˆ°ä¸€ä¸ªæ–°çš„Partnerè®°å½•ã€‚å®ƒä»…æ˜¯ä¸€ä¸ª many-to-oneå…³è”ï¼Œä½†ä»£ç†æœºåˆ¶æ³¨å…¥äº†ä¸€äº›é­”åŠ›æ¥è®©Partnerçš„å­—æ®µçœ‹èµ·æ¥å°±å¥½åƒå±äºMemberçš„è®°å½•ä¸€æ ·ï¼Œæ–°çš„Partnerè®°å½•ä¼šè‡ªåŠ¨å’Œæ–°çš„ä¼šå‘˜è®°å½•ä¸€åŒåˆ›å»ºã€‚

ä½ å¯èƒ½ä¼šæƒ³è¦çŸ¥é“è¿™ä¸ªè‡ªåŠ¨åˆ›å»ºçš„Partnerè®°å½•å¹¶æ²¡æœ‰ä»€ä¹ˆç‰¹åˆ«çš„ã€‚è¿™æ˜¯ä¸€ä¸ªå¸¸è§„çš„Partnerï¼Œå¦‚æœæŸ¥çœ‹Partneræ¨¡å‹ï¼Œå°±ä¼šçœ‹åˆ°è¿™æ¡è®°å½•ï¼ˆå½“ç„¶å…¶ä¸­ä¸åŒ…å«é‚£äº›é¢å¤–çš„ä¼šå‘˜æ•°æ®ï¼‰ã€‚æ‰€æœ‰çš„ä¼šå‘˜éƒ½æ˜¯æˆå‘˜ï¼ˆPartnerï¼‰ï¼Œä½†åªæœ‰éƒ¨åˆ†æˆå‘˜æ˜¯ä¼šå‘˜ã€‚

é‚£ä¹ˆåœ¨åˆ é™¤åŒæ—¶è¿˜æ˜¯ä¼šå‘˜çš„æˆå‘˜æ—¶ä¼šå‘ç”Ÿä»€ä¹ˆå‘¢ï¼Ÿå¯é€šè¿‡å…³è”å­—æ®µçš„ondeleteå€¼æ¥è¿›è¡Œå†³å®šã€‚å¯¹partner_idæˆ‘ä»¬ä½¿ç”¨äº†cascadeã€‚è¿™è¡¨ç¤ºåˆ é™¤æˆå‘˜ä¼šåŒæ—¶åˆ é™¤å¯¹åº”çš„ä¼šå‘˜ã€‚æˆ‘ä»¬å¯ä»¥ä½¿ç”¨æ›´ä¸ºä¿å®ˆçš„è®¾ç½®restrictæ¥ç¦æ­¢åœ¨æœ‰å…³è”ä¼šå‘˜æ—¶åˆ é™¤æˆå‘˜ã€‚è¿™æ ·çš„è¯åªæœ‰åˆ é™¤ä¼šå‘˜æ—¶æ‰ä¼šæœ‰æ•ˆã€‚

éœ€è¦æ³¨æ„ä»£ç†ç»§æ‰¿ä»…ç”¨äºå­—æ®µï¼Œè€Œä¸èƒ½ç”¨äºæ–¹æ³•ã€‚å› æ­¤ï¼Œå¦‚æœPartneræ¨¡å‹æœ‰ä¸€ä¸ªdo_something()æ–¹æ³•ï¼Œæˆå‘˜æ¨¡å‹ä¸ä¼šè‡ªåŠ¨ç»§æ‰¿å®ƒã€‚



##### æ‰©å±•çŸ¥è¯†â€¦

å¯¹äºè¿™ä¸ªç»§æ‰¿ä»£ç†æœ‰ä¸€ä¸ªå¿«æ·æ–¹å¼ã€‚ä»£æ›¿åˆ›å»ºä¸€ä¸ª`_inherits`å­—å…¸ï¼Œå¯ä»¥åœ¨Many2oneå­—æ®µå®šä¹‰ä¸­ä½¿ç”¨delegate=Trueå±æ€§ã€‚è¿™å’Œ`_inherits`é€‰é¡¹çš„åŠŸèƒ½å®Œå…¨ä¸€æ ·ã€‚å…¶ä¸»è¦ä¼˜ç‚¹æ˜¯æ›´ä¸ºç®€æ´ã€‚åœ¨ç»™å‡ºçš„ç¤ºä¾‹ä¸­ï¼Œæˆ‘ä»¬æ‰§è¡Œäº†ä¸å‰è¿°ç›¸åŒçš„ç»§æ‰¿ä»£ç† ï¼Œä½†åœ¨è¿™ç§æƒ…å†µä¸‹ï¼Œæˆ‘ä»¬å¯¹partner_idå­—æ®µä½¿ç”¨äº†delegate=Trueé€‰é¡¹æ¥ä»£æ›¿`_inherits`å­—å…¸çš„åˆ›å»ºï¼š

```python
class LibraryMember(models.Model):
     _name = 'library.member'
     partner_id = fields.Many2one('res.partner', 'ä»£ç†ç»§æ‰¿', ondelete='cascade', delegate=True)
     date_start = fields.Date('Member Since')
     date_end = fields.Date('Termination Date')
     member_number = fields.Char()
     date_of_birth = fields.Date('Date of birth')
```



å…³äºä»£ç†ç»§æ‰¿ä¸€ä¸ªå€¼å¾—æ³¨æ„çš„ç”¨ä¾‹æ˜¯ç”¨æˆ·æ¨¡å‹ res.usersã€‚å®ƒç»§æ‰¿è‡ªæˆå‘˜ï¼ˆres.partnerï¼‰ã€‚è¿™è¡¨ç¤ºå…¶ä¸­åœ¨Userä¸­å¯è§çš„ä¸€äº›å­—æ®µå®é™…å­˜å‚¨åœ¨Partneræ¨¡å‹ä¸­ï¼ˆå°¤å…¶æ˜¯nameå­—æ®µï¼‰ã€‚åœ¨æ–°ç”¨æˆ·åˆ›å»ºæ—¶ï¼Œæˆ‘ä»¬è¿˜è·å–äº†ä¸€ä¸ªæ–°çš„è‡ªåŠ¨åˆ›å»ºçš„Partnerã€‚

è¿˜åº”è¯´æ˜å¸¦æœ‰_inheritçš„ä¼ ç»Ÿç»§æ‰¿ä¼šå°†åŠŸèƒ½æ‹·è´åˆ°æ–°æ¨¡å‹ä¸­ï¼Œè™½ç„¶æ•ˆç‡å¹¶ä¸é«˜ã€‚è¿™åœ¨*ä½¿ç”¨ç»§æ‰¿å‘æ¨¡å‹æ·»åŠ åŠŸèƒ½*ä¸€èŠ‚ä¸­è¿›è¡Œäº†è®¨è®ºã€‚



##### ä½¿ç”¨æŠ½è±¡æ¨¡å‹å®ç°å¯å¤ç”¨æ¨¡å‹åŠŸèƒ½

æœ‰æ—¶ï¼Œä¼šæœ‰ä¸€ä¸ªå…·ä½“çš„åŠŸèƒ½ï¼Œæˆ‘ä»¬å¸Œæœ›æ·»åŠ åˆ°å‡ ä¸ªä¸åŒçš„æ¨¡å‹ä¸­ã€‚åœ¨ä¸åŒçš„æ–‡ä»¶ä¸­é‡å¤ç›¸åŒä»£ç åŸºæœ¬ä¸Šæ˜¯ä¸€ç§ä¸è‰¯ç¼–ç¨‹å®è·µï¼Œæœ€å¥½å¯ä»¥ä¸€æ¬¡å®ç°å¤šæ¬¡å¤ç”¨ã€‚

æŠ½è±¡æ¨¡å‹è®©æˆ‘ä»¬å¯ä»¥åˆ›å»ºä¸€ä¸ªé€šç”¨æ¨¡å‹æ¥å®ç°ä¸€äº›åŠŸèƒ½ï¼Œç„¶åç”±æ™®é€šæ¨¡å‹è¿›è¡Œç»§æ‰¿ä»¥ä½¿ç”¨è¯¥åŠŸèƒ½ã€‚

ä½œä¸ºç¤ºä¾‹ï¼Œæˆ‘ä»¬å°†å®ç°ä¸€ä¸ªç®€å•çš„å­˜æ¡£åŠŸèƒ½ã€‚å®ƒå°†activeå­—æ®µåŠ å…¥åˆ°æ¨¡å‹ä¸­ï¼ˆå¦‚æœå°šæœªå­˜åœ¨ï¼‰å¹¶æ·»åŠ ä¸€ä¸ªå­˜æ¡£æ–¹æ³•æ¥åˆ‡æ¢activeæ ‡è®°ã€‚è¿™å¯ä»¥ç”Ÿæ•ˆæ˜¯å› ä¸ºactiveæ˜¯ä¸€ä¸ªé­”æ³•å­—æ®µï¼Œå¦‚æœé»˜è®¤åœ¨æ¨¡å‹ä¸­å‡ºç°ï¼Œactive=False çš„è®°å½•ä¼šåœ¨æŸ¥è¯¢ä¸­è¢«è¿‡æ»¤æ‰ã€‚

ä¸‹é¢æˆ‘ä»¬å°†åœ¨å›¾ä¹¦æ¨¡å‹ä¸­æ·»åŠ å®ƒã€‚

##### å‡†å¤‡å·¥ä½œ

æœ¬èŠ‚ä¸­ï¼Œæˆ‘ä»¬ç»§ç»­ä½¿ç”¨ä¸Šä¸€èŠ‚ä¸­çš„my_libraryæ’ä»¶æ¨¡å‹ã€‚

##### å¦‚ä½•å®ç°â€¦

å­˜æ¡£åŠŸèƒ½æ˜¾ç„¶å¯ç‹¬ç«‹ä¸ºä¸€ä¸ªæ’ä»¶æ¨¡å—æˆ–è€…è‡³å°‘åº”æœ‰è‡ªå·±çš„Pythonä»£ç æ–‡ä»¶ã€‚ä½†ä¸ºä¿æŒè®²è§£å°½å¯èƒ½ç®€å•ï¼Œæˆ‘ä»¬å°†ä¼šæŠŠå®ƒå¡åˆ°models/library_book.pyæ–‡ä»¶ä¸­ï¼š

- ä¸ºå­˜æ¡£åŠŸèƒ½æ·»åŠ æŠ½è±¡æ¨¡å‹ã€‚åº”åœ¨ä½¿ç”¨å®ƒçš„å›¾ä¹¦æ¨¡å‹ä¸­å®šä¹‰

  ```python
  class BaseArchive(models.AbstractModel):
       _name = 'base.archive'
       active = fields.Boolean(default=True)
       def do_archive(self):
           for record in self:
              record.active = not record.active
  ```

- æ¥ç€ï¼Œæˆ‘ä»¬ç¼–è¾‘å›¾ä¹¦æ¨¡å‹æ¥ç»§æ‰¿å­˜æ¡£æ¨¡å‹

  ```python
  class LibraryBook(models.Model):
       _name = 'library.book'
       _inherit = ['base.archive']
       # ...
  ```

- éœ€è¦å¯¹æ’ä»¶æ¨¡å—è¿›è¡Œå‡çº§æ¥è®©ä¿®æ”¹ç”Ÿæ•ˆã€‚



##### è¿è¡ŒåŸç†â€¦

- æŠ½è±¡æ¨¡å‹åŸºäºmodels.AbstractModelçš„ç±»è¿›è¡Œåˆ›å»ºï¼Œè€Œéå¸¸ç”¨çš„models.Modelã€‚

- å®ƒæ‹¥æœ‰å¸¸è§„æ¨¡å‹çš„æ‰€æœ‰å±æ€§å’ŒåŠŸèƒ½ï¼ŒåŒºåˆ«åœ¨äºORMä¸ä¼šåœ¨æ•°æ®åº“ä¸­åˆ›å»ºå®é™…çš„ä½“ç°ã€‚

- è¿™è¡¨ç¤ºå®ƒä¸èƒ½å­˜å‚¨ä»»ä½•æ•°æ®ã€‚ä»…ç”¨ä½œæ·»åŠ åˆ°å¸¸è§„æ¨¡å‹ä¸­çš„å¯å¤ç”¨åŠŸèƒ½çš„ä¸€ä¸ªæ¨¡æ¿ã€‚

æˆ‘ä»¬çš„å­˜æ¡£æŠ½è±¡æ¨¡å‹éå¸¸ç®€å•ï¼Œä»…æ·»åŠ activeå­—æ®µå’Œä¸€ä¸ªæ–¹æ³•æ¥åˆ‡æ¢activeæ ‡è®°çš„å€¼ï¼Œæˆ‘ä»¬å°†åœ¨ç¨ååœ¨ç”¨æˆ·ç•Œé¢ä¸­é€šè¿‡æŒ‰é’®è¿›è¡Œä½¿ç”¨ã€‚

æ¨¡å‹ç±»ä¸­å®šä¹‰äº†_inheritå±æ€§æ—¶ï¼Œå®ƒç»§æ‰¿é‚£äº›ç±»ä¸­çš„å±æ€§æ–¹æ³•ï¼Œå®šä¹‰åœ¨å½“å‰ç±»ä¸­çš„å±æ€§æ–¹æ³•å¯¹è¿™äº›ç»§æ‰¿åŠŸèƒ½è¿›è¡Œä¿®æ”¹ã€‚

è¿™é‡Œæ‰€é‡‡ç”¨çš„æœºåˆ¶ä¸å¸¸è§„æ¨¡å‹ç»§æ‰¿ç›¸åŒï¼ˆå¦‚*ä½¿ç”¨ç»§æ‰¿å‘æ¨¡å‹æ·»åŠ åŠŸèƒ½*ä¸€èŠ‚ï¼‰ã€‚ä½ å¯èƒ½æ³¨æ„åˆ°äº†`_inherit`ä½¿ç”¨ä¸€ä¸ªæ¨¡å‹æ ‡è¯†ç¬¦åˆ—è¡¨è€Œä¸æ˜¯å¸¦æœ‰ä¸€ä¸ªæ¨¡å‹æ ‡è¯†ç¬¦çš„å­—ç¬¦ä¸²ã€‚å…¶å®_inheritå¯ä»¥ä½¿ç”¨è¿™ä¸¤ç§å½¢å¼ã€‚

- ä½¿ç”¨åˆ—è¡¨å½¢å¼å…è®¸æˆ‘ä»¬ç»§æ‰¿å¤šä¸ªï¼ˆé€šå¸¸æ˜¯æŠ½è±¡ï¼‰ç±»ã€‚
- åœ¨æœ¬ä¾‹ä¸­ï¼Œæˆ‘ä»¬ä»…ç»§æ‰¿äº†ä¸€ä¸ªç±»ï¼Œå› æ­¤ä½¿ç”¨æ–‡æœ¬å­—ç¬¦ä¸²ä¹Ÿæ²¡æœ‰é—®é¢˜ã€‚

ä¸ºè¿›è¡Œæ¼”ç¤ºæˆ‘ä»¬ä½¿ç”¨äº†åˆ—è¡¨ã€‚



##### æ‰©å±•çŸ¥è¯†â€¦

å€¼å¾—æ³¨æ„çš„å†…ç½®æŠ½è±¡æ¨¡å‹æ˜¯mail.threadï¼Œè¿™ç”±mailï¼ˆDiscussï¼‰æ’ä»¶æ¨¡å—æä¾›ã€‚åœ¨æ¨¡å‹ä¸­å®ƒå¯ç”¨è®¨è®ºåŠŸèƒ½æ¥é©±åŠ¨åœ¨ä¸åŒè¡¨å•åº•éƒ¨çœ‹åˆ°çš„æ¶ˆæ¯å¢™ã€‚

AbstractModelå¤–ï¼Œè¿˜æœ‰ç¬¬ä¸‰ç§æ¨¡å‹ç±»å‹ï¼šmodels.TransientModelã€‚åƒmodels.Modelå®ƒæœ‰ä¸€ä¸ªæ•°æ®åº“ä½“ç°ï¼Œä½†æ‰€åˆ›å»ºçš„è®°å½•ä¾›ä¸´æ—¶ä½¿ç”¨ï¼Œä¼šå®šæœŸç”±æœåŠ¡ç«¯è°ƒåº¦ä»»åŠ¡æ¸…é™¤ã€‚é™¤æ­¤ä¹‹åï¼Œä¸´æ—¶æ¨¡å‹ï¼ˆä¹Ÿè¯‘ä½œç¬æ€æ¨¡å‹ï¼‰å’Œå¸¸è§„æ¨¡å‹çš„åŠŸèƒ½ä¸€è‡´ã€‚

models.TransientModelå¯¹äºç§°ä¹‹ä¸ºå‘å¯¼çš„æ›´ä¸ºå¤æ‚çš„ç”¨æˆ·äº¤äº’ä¼šéå¸¸æœ‰ç”¨ã€‚å‘å¯¼ç”¨äºè¯·æ±‚ç”¨æˆ·è¾“å…¥ã€‚åœ¨[ç¬¬å…«ç«  é«˜çº§æœåŠ¡ç«¯å¼€å‘æŠ€å·§](https://alanhou.org/odoo-14-advanced-server-side-development-techniques/)ä¸­ï¼Œæˆ‘ä»¬æ¢è®¨å¦‚ä½•ä½¿ç”¨å®ƒä»¬æ¥å®ç°é«˜çº§ç”¨æˆ·äº¤äº’ã€‚

![Odoo 14å¼€å‘è€…æŒ‡å—ç¬¬å››ç«  åº”ç”¨æ¨¡å‹](https://i.cdnl.ink/homepage/wp-content/uploads/2021/01/2021010414461579.jpg)







##### ç»§æ‰¿æ¨¡å‹demo

```python
from odoo import models, fields, api

class father(models.Model):
     '''çˆ¶è¡¨'''
     _name = 'father'
     name = fields.Char(string='çˆ¶å')
     age = fields.Integer(string='çˆ¶å¹´é¾„')

class add_father(models.Model):
     '''ç±»ç»§æ‰¿ï¼ˆæ‰©å±•ï¼‰'''
     _inherit = 'father'
     sex = fields.Selection(
          [
               ('man','ç”·'),
               ('woman','å¥³')
          ], string='çˆ¶æ€§åˆ«')

class son(models.Model):
     '''åŸå‹ç»§æ‰¿'''
     _inherit = 'father'
     _name = 'son'

     son_name = fields.Char('å­å')
     son_sex = fields.Selection(
          [
               ('man','ç”·'),
               ('woman','å¥³')
          ], string='æ€§åˆ«')

class proxy_son(models.Model):
    '''ä»£ç†ç»§æ‰¿'''
    _name = 'proxy.son'
    # _inherits = {'father': 'name'}
    # name = fields.Many2one(
    #      'father', string='çˆ¶å',
    #      ondelete='cascade')
    name = fields.Many2one('father', 'çˆ¶å', ondelete='cascade', delegate=True)
    age = fields.Integer(string='å­å¹´é¾„')

```



##### æŠ½è±¡ç»§æ‰¿demo

```python
from odoo import models, fields

class BaseArchive(models.AbstractModel):
     _name = 'base.archive'
     active = fields.Boolean(default=True, string='æ˜¯å¦æ¶ˆå¤±')
     def do_archive(self):
         for record in self:
            record.active = not record.active

class LibraryBook(models.Model):
    # å®šä¹‰è¡¨æ¨¡å‹åï¼Œä¼šæŠŠ.è½¬ä¸º_ï¼šlibrary_book
    _name = 'library.book'
    # æ·»åŠ ä¸€ä¸ªç”¨æˆ·å‹å¥½çš„æ¨¡å‹æ ‡é¢˜
    _description = 'Library Book'
    # æŒ‰æ—¶é—´æœ€è¿‘é™åºæ’åºï¼Œç„¶åæŒ‰æ ‡é¢˜å‡åºæ’åºã€‚é»˜è®¤æ˜¯å‡åº
    _order = 'date_release desc, name'
    # ä½¿ç”¨short_nameå­—æ®µä½œä¸ºè®°å½•
    _rec_name = "short_name"
    _inherit = ['base.archive']

    name = fields.Char('ä¹¦å', required=True, index=True)
    short_name = fields.Char('ç®€å', translate=True, index=True)
    notes = fields.Text('ç¬”è®°')
    state = fields.Selection(
        [('draft', 'è‰ç¨¿'),
         ('available', 'å‘è¡Œ'),
         ('lost', 'å¤±æ•ˆ')],
        'State', default="draft")
    description = fields.Html('æè¿°', sanitize=True, strip_style=False)
    cover = fields.Binary('å›¾ç‰‡')
    out_of_print = fields.Boolean('æ˜¯å¦æ‰“å°')
    date_release = fields.Date('åˆ›å»ºæ—¥æœŸ', default=fields.Datetime.now)
    date_updated = fields.Datetime('æ›´æ”¹æ—¥æœŸ')
    pages = fields.Integer('æ•´ä¹¦é¡µæ•°',
                           groups='base.group_user',
                           states={'lost': [('readonly', True)]},
                           help='æ•´ä¹¦é¡µæ•°', company_dependent=False)
    reader_rating = fields.Float(
        'ä¹¦ä½†å¹³å‡åˆ†',
        digits=(14, 1),  # å¯é€‰ç²¾åº¦ (total, decimals),
    )

    # Odooä½¿ç”¨**ä¼™ä¼´æ¨¡å‹res.partner**æ¥è¡¨ç¤ºäººã€ç»„ç»‡å’Œåœ°å€
    author_ids = fields.Many2many('res.partner', string='ä½œè€…')
    cost_price = fields.Float('èŠ±è´¹é‡‘é¢', digits='Book Price')

    currency_id = fields.Many2one('res.currency', string='Currency')
    # å¯é€‰å±æ€§currency_field='currency_id'ï¼Œåœ¨å¸ç§å­—æ®µä½¿ç”¨currency_idä¹‹å¤–çš„åç§°æ—¶ä½¿ç”¨
    retail_price = fields.Monetary('å”®å–ä»·æ ¼')

    publisher_ids = fields.Many2one(
        'res.partner', string='æ‰€å±å‡ºç‰ˆç¤¾',
        # optional:
        ondelete='set null', context={}, domain=[],
    )
    category_id = fields.Many2one('library.book.category', string='ä¹¦æ‰€å±ç±»')

    def name_get(self):
        """æœ¬æ–¹æ³•ç”¨äºè‡ªå®šä¹‰è®°å½•çš„æ˜¾ç¤ºåç§°"""
        result = []
        for record in self:
            rec_name = "%s (%s)" % (record.name, record.date_release)
            result.append((record.id, rec_name))
        return result
```

