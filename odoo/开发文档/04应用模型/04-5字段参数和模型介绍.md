##### 自动字段

Odoo在所有模型中创建了几个字段。这些字段由系统管理，不应该写入。

如果有用或必要可以查看。

特点：

1：在模型里面，这些字段是系统保留的，作为开发人员不能修改这些字段。

2：在模型数据表中自动创建的字段，特殊需要时可以重写，但保持类型要保持不变。

3：模型中没有写这个字段时候也可以去表单视图等写入（因为是模型自带的字段）

注意事项：这些保留字段的自动创建可通过设置模型属性 _log_access=False 来进行禁用。



| 字段                    | 描述                               |
| ----------------------- | ---------------------------------- |
| Odoo.fields.id          | 记录id （标识符字段）              |
| Odoo.fields.create_date | 创建记录时的存储，Datetime创建时间 |
| Odoo.fields.create_uid  | 创建记录的用户 （res.users用户）   |
| Odoo.fields.write_date  | 上次更新记录时的日期时间           |
| Odoo.fields.write_uid   | 上次更新记录的用户                 |

扩展

如果当前记录集的长度为1，则返回其中唯一记录的ID。否则会引发错误。访问日志字段，如果启用了_log_access，这些字段将自动设置和更新。可以禁用它，以避免在表上创建或更新它们无用的字段。默认情况下，_log_access设置为与_auto相同的值。



| **参数**                          | 描述                                                         |
| --------------------------------- | ------------------------------------------------------------ |
| **string(str)**                   | 字段的标题，在UI视图标签中使用。它是可选项，页面显示的字段标签名称。缺省则显示字段本身。 |
| **default（value 或者callable）** | 字段默认值参数。缺省为空。可设置固定值或者带返回值方法。     |
| **tracking（bool）**              | 字段跟踪 （要继承2个模型<br />_inherit = ['mail.thread', 'mail.activity.mixin']） |
| **store（bool）**                 | 普通字段默认为True，字段值存储数据库表中。computed字段，默认为False，不在数据库表中存储字段的值。 |
| **readonly(bool)**                | 字段只读参数。默认为False，设置为True时，页面该字段不可编辑。 |
| **required（bool）**              | 字段必填参数。默认为False，设置为True时，页面该字段必输，数据表该字段不能为空。 |
| **size**                          | char类型字段的字符长度。                                     |
| **domain**                        | 过滤条件，应用于关系型字段，value可以是一个函数来生成domain。 |
| **digits**                        | 精度控制元组，(total, decimal)，应用于float字段。            |
| **ondelete**                      | 适用于many2one字段（谨慎使用）<br/>当所引用的数据被删除时采取的操作，<br/>取值：’set null'、‘restrict'、’cascade'<br/>set null: 当b中删除记录时，modelA中相关记录的a=null<br/>cascade: 当b中删除记录时，modelA中相关记录也全部删除<br/>restrict: 当b中删除记录时，如果modelA中存在对应记录，则无法操作 b 的删除<br/>如果Many2one字段中没有设置ondelete属性，则默认为set null |
| **context**                       | context传递变量，应用于关系型字段。                          |
| **limit(int)**                    | one2many、many2many默认的limit数量（80）。                   |
| **compute**                       | 计算字段参数。                                               |
| **compute_sudo**                  | 计算超级权限参数。                                           |
| **inverse**                       | 逆向计算函数的函数名（可选）。                               |
| **search**                        | 实现该字段search方法的函数名。                               |
| **groups（str）**                 | 权限组参数。默认为空，可以配置权限组的外部id，该字段受权限控制，只能对应组可读写。 |
| **related**                       | 引用字段参数。设置了该参数的字段相当于是配置字段的一个复制字段 |
| **translate**                     | 在设置为True时，让字段可翻译，它可根据用户界面的语言保存不同值。 |
| **help(str)**                     | 是在UI提示中显示的解释性文本。提示信息（Tooltip）            |
| **index（bool）**                 | 在设置为True时，为该字段创建一个数据库索引，有时可供更快速搜索使用。它取代了已弃用的select=1属性。为频繁read、不频繁write的字段建立索引：index=True（old_api: select）。 |
| **states（bool）**                | 这个可以根据state状态的的值动态改变字段在XML中的显示状态。必须配合state状态字段使用。 |
| **copy（bool）**                  | 可复制参数。默认为True，行记录复制时复制该字段的值；设置为False时，行记录复制时不进行值复制，取默认值赋值。 |
| **auto_join**                     | Many2one字段支持一个额外的auto_join属性。这个标记允许[ORM](https://so.csdn.net/so/search?q=ORM&spm=1001.2101.3001.7020)对这个字段使用SQL连接（join）。因此它不受普通的ORM限制，如用户访问控制和记录权限规则。在具体的用例中，它可以解决性能问题，但建议尽量避免使用。 |



##### 什么是模型

💡模型（Model）最主要是存储数据记录的，它可以持久化地对数据记录(record)进行存储，直至记录被删除。几乎所有的自定义模块都会继承自models.Model，可以存储数据库中所有开发所需的数据与字段。

每个模型实例都是⼀个“记录集”，即模型记录的有序集合。记录集由browser()，search()或者字段访问之类的⽅法返回。记录没有显⽰表⽰：⼀个记录表现为记录集的⼀条记录。如果要创建⼀个不能实例化的类，_register属性要设置为False

（📋odoo通过orm来实现对数据库的操作，可以通过在odoo中定义模型，然后根据定义的模型来生成数据库中的表，并通过python中操作对象的方式，来进行对数据库的操作，大部分场景下不在需要写SQL语句，提高了数据库操作的效率以及安全性。）



##### 模型的类型

基本模型 models.Model

    对于常规数据库持久化模型。绝大多数Odoo模型中，类都是基于models.Model类的。
    这种类型的模型具有永久的数据库持久性：为它们创建数据库表，并且它们的记录被存储，直到被显式删除。

瞬态模型 TransientMode.Model

    为临时数据，存储在数据库中，但隔一段时间自动清除，相当于临时表，通常应用于向导。

抽象模型 AbstractModel.Model

```
不在数据库存储数据，不会在数据库创建表。
抽象模型作为可重用的功能集，利用odoo的继承功能，混入到其他模型中去。通常用于定义接口或者用作报表模型。
```

💡Odoo模型可通过继承以上之一创建。


Odoo中一切都是基于model编程，即使是前端的menu、action、view，都是也都有对应model，和业务数据无异。一个model的创建，然后通过简单的视图配置，那么这个model对应的CRUD基础功能就已经实现，这些都归功于odoo对于model的抽象。

        Odoo中的model分为三类AbstractModel、Model、TransientModel，继承关系如下
        从源码中可以看出AbstractModel是Model和TransientModel的父类。而这个三者的区别也主要在_auto、_register、_abstract、_transient这四个属性上。
```
其中 _auto 是否应创建数据库表。 如果设置为假覆盖init() 来创建数据库表。自动默认为真的为常态模型和 瞬态模型, 假为抽象模型。要创建没有任何表的模型，请继承抽象模型。
        这里的 models 和 Model 的含义是不一样的。前者指的是Odoo的模型对象，也就是我们开发Odoo时所需要用到的.py文件；后者指的是对于列表、字典、自定义类这些可变变量，如果将其作为类变量，则是传引用，即所有对象的类变量公用一个内存地址。这是Python语言的语法所规定的。

扩展：模型的属性

_auto(bool)：决定是否创建数据库表（默认值为True)。如果设置为False，则需要重写init()函数来创建表。
_table = None：当_auto设置成False时，该值为创建的表名；默认情况下会自动生成一个。用来支持模型的数据库表名。通常，它是左自动计算，是下划线取代点的模型名称，但也可以设置特定的表名。
_sequence=None：用于字段"ID"的SQL序列。
_register(bool)：在ORM注册表中不可见。
_name ： 是我们创建odoo模型的内部标识符，创建新模型时，必含项。
_description ：是当用户界面显示模型时，一个方便用户的模型记录标题。它是可选项、推荐项。
_order ：当浏览模型记录或者显示在列表视图时，设置默认顺序。by子句，所以它可以是你可以使用的任何东西，尽管它拥有灵活的行为、支持翻译和多对一的字段名称。为了完整起见，还有更多的属性在后续案例中会使用：_order = "字段名 排序方法"。例如：_order = "serial_number asc" 以serial_number字段升序展示，升序排列 asc 倒序排列 desc。
_rec_name：用来指出引用关联字描述记录的字段，例如多对一关系。使用short_name作为模型的默认展示字段但是这个属性允许我们使用任何其他字段来实现这个目的。
        _inherit ：继承。

        _inherits ：委托继承。

        _check_company_auto(bool)：在写入和创建时调用。

        _check_company：以确保公司在具有check_company=True作为属性的关系字段上的一致性。

        _parent_store(bool)

        _abstract(bool)：判断模型是否为抽象模型。

        _transient(bool)：判断模型是否为瞬态模型。

        _date_name（=‘date')：用于默认日历视图的字段。

        _fold_name(='fold')：确定看板视图中折叠组的字段。
```

