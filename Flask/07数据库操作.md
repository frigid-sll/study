##### 直接映射

Flask中可以使用SQLAlchemy库来操作数据库，而SQLAlchemy库提供了ORM（对象关系映射）功能，可以将数据库中的表结构映射成Python中的类，从而实现对数据库的操作。但是，如果要使用ORM功能，需要在Python代码中定义对应的类和属性，这样可以更加灵活地操作数据库。

如果不想手动定义类和属性，可以使用SQLAlchemy提供的自动映射功能，这样可以将数据库中已有的表结构自动映射成Python中的类和属性。具体步骤如下：

1.创建一个SQLAlchemy对象

```python
from flask_sqlalchemy import SQLAlchemy

db = SQLAlchemy(app)
```

2.指定要映射的数据表

```python
class User(db.Model):
    __tablename__ = 'user'
```

3.设置自动映射

```python
class User(db.Model):
    __tablename__ = 'user'
    __table_args__ = {'autoload': True}
```

设置`__table_args__`属性，将`autoload`参数设置为True，即可实现自动映射。此时，`User`类的属性会自动对应数据库表中的字段信息。

需要注意的是，自动映射只能映射已有的表结构，如果数据库中新增了字段或者表，需要手动更新Python代码。同时，自动映射可能会存在一些问题，比如无法处理复杂的关联关系等，因此在实际开发中，建议手动定义类和属性，以更好地控制代码逻辑。





##### 创建表和表结构

在Flask中连接MySQL数据库的表，可以使用第三方的ORM框架，如SQLAlchemy。使用SQLAlchemy可以方便地创建数据库模型，并且提供了简单易用的API来操作数据库。

首先，在models.py文件中创建数据库模型，如下所示：

```python
from flask_sqlalchemy import SQLAlchemy
from flask import Flask

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql://username:password@localhost/db_name'
app.config['SQLALCHEMY_TRACK_MODIFICATIONS'] = False
db = SQLAlchemy(app)

class User(db.Model):
    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(80), unique=True)
    email = db.Column(db.String(120), unique=True)

    def __init__(self, username, email):
        self.username = username
        self.email = email

    def __repr__(self):
        return '<User %r>' % self.username
```

在这个例子中，我们创建了一个User类，它继承了db.Model，并定义了三个属性：id、username和email。id是一个整数类型的主键，username和email是字符串类型的唯一键。

接下来，在views.py中定义路由函数，可以使用db.session来操作数据库，如下所示：

```python
from models import db, User

@app.route('/add_user')
def add_user():
    user = User('john', 'john@example.com')
    db.session.add(user)
    db.session.commit()
    return 'User added successfully'
```

在这个例子中，我们定义了一个add_user的路由函数，它创建了一个新的User对象，并使用db.session.add()将其添加到数据库中。最后，我们使用db.session.commit()提交更改。

这样，我们就可以在Flask中连接MySQL数据库的表，并在views中调用路由函数操作数据库了。





##### 映射表创建表结构

要在Flask中使用现有的MySQL数据表，需要使用ORM（对象关系映射）库来将表映射为模型。其中，SQLAlchemy是一个流行的ORM库，它支持多种数据库，包括MySQL。

以下是一个使用SQLAlchemy将MySQL表映射为Flask模型的示例：

```python
from flask import Flask
from flask_sqlalchemy import SQLAlchemy

app = Flask(__name__)
app.config['SQLALCHEMY_DATABASE_URI'] = 'mysql://username:password@hostname/database_name'
db = SQLAlchemy(app)

class User(db.Model):
    __tablename__ = 'users'

    id = db.Column(db.Integer, primary_key=True)
    username = db.Column(db.String(50), unique=True, nullable=False)
    email = db.Column(db.String(120), unique=True, nullable=False)
    password = db.Column(db.String(60), nullable=False)

    def __repr__(self):
        return f"User('{self.username}', '{self.email}')"
```

在上面的代码中，我们使用SQLAlchemy创建了一个Flask应用程序，并将其配置为使用MySQL数据库。然后，我们定义了一个名为User的模型，并将其映射到MySQL中名为users的数据表。模型中的每个属性都对应于数据表中的列。

最后，我们定义了一个__repr__方法，用于在调试和测试时打印User对象的有用信息。

通过这种方式，我们可以轻松地使用Flask和SQLAlchemy将MySQL数据表映射为模型，并使用这些模型进行查询和操作。