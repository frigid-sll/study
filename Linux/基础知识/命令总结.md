

##### 系统命令帮助方法：manual手册

```
man 命令
man ls
man mkdir
```



##### systemctl

```
该命令的语法如下：

systemctl start|stop|restart|status|reload 服务名

该命令支持的选项有：

选项	说明
-h	显示帮助信息
–version	显示版本信息
-a	显示所有的服务
使用
注：ls /usr/lib/systemd/system 命令可以查看服务。
```

- 查找服务

  ```
  systemctl -a | grep 服务名
  ```



##### 查找某个进程文件所在路径

```
查看进程号
netstat -ntpl

ps -aux | grep 进程号
```





##### 系统命令

- 组成：
  - 登录用户信息（root/其他用户）
  - @ 分隔符
  - 主机名信息
  - 当前所在系统的目录路径信息
- 作用：只有在命令提示符后面输入命令才有效果



##### 系统中将命令分为两个大类

- 外置命令：需要进行安装

- 内置命令：所有系统都内置的命令

  - help命令进行查看所有的内置命令
  - 就算找到内置命令位置，将其移走也不会影响使用

- 查看内置还是外置命令

  - type 命令

    ```
    type cd 
    cd is shell builtin	#cd是一个内置命令
    ```

  - 内置命令帮助
  
    ```
    info 内置命令
    ```
    
  - 外置命令帮助
  
    ```
    命令 --help
    ```
    
  



##### 命令语法规范,命令参数之间要有空格分隔

命令 参数 文件/路径

| 命令 | 空格 | 参数选项（条件） | 空格 | 文件或路径（要处理的内容） |
| ---- | ---- | ---------------- | ---- | -------------------------- |
| 结婚 | 空格 | -有房有车有存款  | 空格 | 白富美                     |
| 结婚 | 空格 | -没车没房没存款  | 空格 | 女的就行                   |
| rm   | 空格 | -f               | 空格 | /tmp/test.txt              |
| rm   | 空格 | -fr              | 空格 | /tmp/                      |



##### 快捷键

中断命令执行操作过程：ctrl+c

清屏：ctrl+l

退出当前用户：ctrl+d

补全信息：tab

调取之前输入过的历史命令：方向键上下

快速将光标移动到行首：ctrl+a

快速将光标移动到行尾：ctrl+e

跳跃式移动：ctrl+方向键

将空格分割的一个字符串进行剪切：ctrl+w

从光标所在位置到行尾内容剪切：ctrl+k

将光标所在位置到行首进行剪切：ctrl+u

粘贴：ctrl+y

锁定xshell：ctrl+s

解锁：ctrl+q（锁定时候输入的东西解锁后会写入）

输入上一行命令的最后一块字符串：est+.

快速搜索历史命令：ctrl+r



##### 永久变量的设置/etc/profile==/etc/bashrc

```
vi /etc/profile
切换到行尾
添加x=1234
即使系统重启后echo $x 也会存在
后续修改后需要重新加载
```

##### 重新加载文件，不是所有的文件都可以生效

```
source /ect/profile
```



##### 查询命令所在的位置

```
which cat
```





##### 查询端口是否开放

```shell
firewall-cmd --query-port=8080/tcp
```

##### 开放80端口

```shell
firewall-cmd --permanent --add-port=80/tcp
```

##### 移除端口

```shell
firewall-cmd --permanent --remove-port=8080/tcp
```



##### 显示文件信息类型：file

```
file 文件
```



##### uniq：

```
#删除重复行
uniq file
```

**参数**：

- -c或--count 在每列旁边显示该行重复出现的次数。
- -d或--repeated 仅显示重复出现的行列。
- -f<栏位>或--skip-fields=<栏位> 忽略比较指定的栏位。
- -s<字符位置>或--skip-chars=<字符位置> 忽略比较指定的字符。
- -u或--unique 仅显示出一次的行列。
- -w<字符位置>或--check-chars=<字符位置> 指定要比较的字符。
- --help 显示帮助。
- --version 显示版本信息。
- [输入文件] 指定已排序好的文本文件。如果不指定此项，则从标准读取数据；
- [输出文件] 指定输出的文件。如果不指定此选项，则将内容显示到标准输出设备（显示终端）。



##### 显示命令路径以及文件：显示命令路径以及命令的相关的帮助手册路径

```
whereis 命令
```



##### 查找文件路径

- locate

  ```
  yum provides locate
  yum install -y mlocate
  
  #建立文件和目录结构的对应关系，便于检索
  updatedb
  #搜索文件 
  locate 文件名
  
  #如果后续有新的文件出现，要进行搜索还要进行updatedb
  ```



##### 显示环境变量

```
echo $PATH
```



##### 临时修改环境变量

```
PATH=...:新增路径
```



##### 永久修改

```
vi /etc/profile
###添加普通变量直接 变量名=值
###修改/添加环境变量  export 变量名=值
export PATh=...:新增路径

#修改完成后重新加载文件
source /etc/profile
```



##### 查看网络

```
ifconifg/ip address show/ip a
```



##### 测试网络

```
ping ip地址 
Linux系统ping是一个长期停不下来的过程
```



##### 图形界面修改网卡地址信息

```
nmtui
```



##### 服务的开启/重启/关闭/检查/开机自启/开机不启动/服务是否正常运行/服务是否开机自启

```
systemctl start 服务名
systemctl restart 服务名
systemctl stop 服务名
systemctl status 服务名
systemctl enable 服务 
systemctl disable 服务
systemctl is-active 服务
systectl is-enabled 服务
```



##### 检查一个ip的一个端口是否能正常访问

```
telnet ip 端口
```





##### lsof

```
查看22端口号打开的文件
lsof -i:22
```





##### 修改配置文件后需要重启，但是这个会重启所有的网卡

```
systemctl restart network
```

##### 单独关闭一个网卡然后立即重启一个网卡

```
ifdown eth0 && ifup eth0
```





##### 系统相关运行命令

- 补充说明：Linux是多用户的系统，windows也是多用户但是在服务器中多用户远程连接需要收费

- 系统关机：

  - shutdown：系统一分钟后关机
  - shutdown -c：系统取消关机

  ```
  [ root@oldboyedu oldboy04] # shutdown
  Shutdown scheduled for Fri 2019-03-29 11:36:45 CST, use ' shutdown -c' to cancel .
  定义一个关机方案=定义什么时间进行关机，使用shutdown -c取消关机计划
  [ root @oldboyedu o1dboy04] #
  Broadcast message from root @oldboyedu.com (Fri 2019-03-29 11:35: 45 CST) :
  会将关机信息广播给所有关机主机的用户
  The system is going down for power-off at Fri 2019-03-29 11:36:45 CST!
  准备什么时间真正进行关机
  ```

  - shutdown -h 数字（数字是几就是等待几分钟，不能设置时间太长）
    - shutdown -h 0/now：也是立即关机
  - halt：立即关机
  - poweroff：立即关机

- 系统重启：

  - shutdown -r 数字（数字是几就是等待几分钟）
    - shutdown -r 0/now：立即重启
  - reboot：立即重启



##### 目录相关命令

- 检查文件是否存在

  ```
  ls 路径
  ls -d /路径 	有针对的查看是否存在，而不是查看目录下的信息
  
  ls -l 路径	查看文件数据的详细信息 大小是字节
  第一个字符是d 代表是目录 颜色为蓝色
  
  ls -lh 路径	查看文件数据的详细信息 数据大小更直观
  
  ls -a 查看隐藏文件 隐藏文件都是以.开头
  
  ls -lt 目录  	按照时间正向排序
  
  ls -ltr 目录	 按照时间逆向排序
  
  t：time
  r：reverse
  ```

- 创建新的目录

  ```
  mkdir 路径
  mdkir -p 路径		创建多层目录
  
  创建多个目录 oldboy01,oldboy02,oldboy03
  mkdir -p /oldboy/oldboy{01..03}
  ```

- 如何进行目录的切换

  ```
  cd 目标路径
  
  cd /路径：绝对路径
  cd 路径/：相对路径
  
  ..：上一级
  .：当前目录
  cd ../../../../../ 如果超出就返回到根目录
  
  cd -：两个目录之间快速切换
  cd ～：切换到家目录
  ```

- 查看所在路径

  ```
  pwd
  ```




##### 创建一个空文件

```
touch 文件名
```



##### 如何对空文件进行编辑vi

- 将文件打开进行直接编辑，vi/vim：用于编辑文件的命令

  - 进入到编辑状态（插入模式）：按键盘上的小写字母i（输入法转为英文）

  - 编写文件内容

  - 进行保存关闭文档

    - 按esc：退出编辑状态
    - 在输入`:`，然后输入wq，再按回车
      - w：保存，q：退出

    ```
    在命令模式：
    G跳转到最后一行，
    gg跳转到行首。
    dd删除一行
    D删除光标这一行后面的内容 包括光标所在的位置
    o在光标的下一行插入空行并进入编辑模式
    ndd 删除n行
    100gg:快速到达文件的第100行
    0 光标到行首
    $ 移动光标到行尾
    u 操作撤销
    
    在末行模式：
    /后面写你要查询的地方
    wq 保存并退出
    wq! 强制保存退出
    ctrl+z 退出编辑模式 不保存
    set nu 显示行号  不会改文件内容
    set nonu 不显示行号
    20,22copy24   将20到22行内容复制 到24行后面
    10,20s/^/#/   将十行到二十行注释
    ```
    
    

- 将文件不打开直接进行编辑：将屏幕显示的信息保存到文件中

  - echo “hello world”（相当于print("hellow world")）
  - echo "hello world" > oldboy.txt
    - 将hello world写入oldboy.txt中，将原有文件内容先进行清空，添加新的信息
  - echo "oldboy shenzhen01" >> oldboy.txt
    - 将内容添加到文件中（新一行）



##### vi/vim

- 命令模式：
  - 移动光标位置并进入编辑状态
    - i：从光标所在位置进入编辑状态
    - I：将光标移动到一行的行首进入编辑状态
    - o：将光标新起下一行进入编辑状态
    - O：将光标新起上一行进入编辑状态
    - A：将光标移到行尾进行编辑
    - a：下一个字符进行编辑
    - C：将光标到行尾内容进行剪切，并进入编辑模式
    - cc：将整行内容进行删除并进入编辑模式
  - 移动光标位置不进入编辑状态
    - G：移动到文件的最后一行
    - gg：移动到文件的第一行
    - ngg：指定移动到第n行
    - $：移动到行尾
    - ^或0：移动到行首
    - dd：剪切一行
    - ndd：剪切n行
    - p：粘贴
    - np：粘贴n行
    - yy：复制一行
    - nyy：复制y行
    - dG：将光标到行尾的内容进行删除
  - `u`：撤销操作
- 编辑模式
- 底行模式：输入`:`或者`/`或者`?`
  - `/`：进入搜索状态，向下搜索，（n依次向下）
  - `:`：输入一些命令
  - `？`：向上搜索（n依次向上）
  
    ```
    搜索时忽略大小写： :se ic
    取消忽略大小写：	:se noic
    
    搜索时就忽略大小写： /oldboy\c		加上一个\c
    ```
  
    



##### vim

- 取消高亮显示

  - 搜索一个文件中没有的内容

- 将第二行到第四行到内容放到第九行后面

  ```
  :2,4move9
  ```

- 将第二行到第四行内容复制到第九行后面

  ```
  :2,4copy9
  ```

- 将所有的oldboy换成oldgirl

  ```
  %s#oldboy#oldgirl#g
  ```

- 将第二行到第四行到oldgirl进行替换oldboy

  ```
  2,4s#oldgirl#oldboy#g
  ```

- 将第十二行到结尾内容进行替换

  ```
  12,$s#替换前内容#替换后内容#g
  ```

  ```
  %全部做替换
  s substitute 替换
  g global 将整行的内容符合需求的进行替换
  ```

- 批量进行注释

  ```
  vim 文件
  ctrl+v 进入视图模式 VISUAL BLOCK
  方向键进行选择，上下 选中行
  选择好行后 按shift+i 进行单行编辑
  编辑好后按esc，其他选中的行也都按照刚才编辑的行进行了修改
  ```

- 批量删除信息

  ```
  vim 文件
  ctrl+v 进入视图模式 VISUAL BLOCK
  方向键进行选择，左右 选中列
  按键盘d或x
  ```

- 工作原理

  - 开始利用vim编辑一个文件
  - 需要判断编辑的文件所在目录中是否有隐藏文件
    - 有：会有报错提示信息
    - 没有：进入到命令模式
  
  - 在命令模式就会产生临时文件
  - 进入编辑模式对文件进行编辑
  - 编辑完成之后需要确定是否正常退出
    - 正常：从编辑状态--esc---命令模式---:wq!保存退出（临时文件重命名）
    - 非正常退出：临时文件会永久保留
  





##### 查看文件内容cat

```
cat 文件

查看多个文件内容
cat 文件1 文件2

显示行号展示内容
cat -n 文件

追加多行
cat >> /oldboy.txt <<EOF
追加的第一行内容
追加的第二行内容
EOF
```



##### 一页一页的查看内容less/more

```
less /etc/service

向下逐行显示：回车
向下逐页显示：空格
向上逐行显示：方向键上
向上逐页显示：b
搜索：
/搜索内容
下一个搜索内容：n

退出：q
```



##### echo

```
echo "..."

输出序列信息
echo {0..100}
echo {01..100}
echo {a..z}

显示不连续有规律的序列
echo {01..10..2}
01 03 05 07 09

识别特殊字符
echo -e "1\n2\n3"
1
2
3
```



##### echo高级用法

- 从前往后删除

  ```
  url=www.baidu.com
  
  echo $url
  www.baidu.com
  
  echo $url | sed "s#www.##g"
  baidu.com
  
  echo ${url#*.}
  baidu.com
  
  echo ${url#*.*.}
  com
  
  echo ${url##*.}
  com
  
  #：后面跟要删除的匹配字符
  ##：贪婪匹配
  ```

- 从后往前删除

  ```
  url=www.baidu.com
  
  echo $url
  www.baidu.com
  
  
  echo ${url%.*}
  www.baidu
  
  echo ${url%.*.*}
  www
  
  echo ${url%%.*}
  www
  
  %：后面跟要删除的匹配字符
  %%：贪婪匹配
  ```

- 替换

  ```
  echo $url
  www.baidu.com
  
  echo ${url/www/sss}
  sss.baidu.com
  
  贪婪匹配
  echo ${url//w/s}
  sss.baidu.com
  ```

  





##### 如何复制保存数据

- 用法：cp 要复制数据信息（文件/目录） 复制到什么位置（目录）

  ```
  cp oldboy.txt /tmp
  ```

- 备份目录

  ```
  cp -r 目录 目标目录
  r：recursion 递归
  ```

- 不需要多次确认
  ```
  \cp -r 目录 目标目录
  ```



##### 删除文件

- 强制删除文件不需要quern

  ```
  rm -f 文件
  f:force 强制
  ```

- 强制删除目录文件

  ```
  rm -rf 目录
  ```



##### 移动数据信息（剪切）

mv命令用法和cp用法类似，但移动目录不用加参数

- 重命名：将oldboy.txt重命名为oldgirl.txt

  ```
  mv oldboy.txt oldgirl.txt
  ```

- 移动数据时，出现重复信息也会进行提示，如果不想提示就加斜杠`\`，也可以使用参数`-f`



##### 批量重命名：rename

```
rename .txt .jpg oldboy*.txt
命令	文件名称需要修改的部分信息	修改成什么信息	将什么样的文件进行修改
```





##### 系统挂载命令

- 在Linux系统中找到挂载的设备

  ```
  ls -l /dev/cdrom
  ```

- 需要将存储设备进行挂载

  ```
  挂载命令语法格式：
  mount 挂载设备文件信息 挂载点（目录信息）
  PS：挂载点目录必须存在,/mnt目录为空
  mount /dev/cdrom /mnt
  
  挂载后/mnt目录里就有/dev/cdrom存储设备里面的信息
  ```

- 卸载挂载点

  ```
  umount /mnt
  卸载后/mnt目录里就没有/dev/cdrom里的数据
  ```


- 开机自动挂载

  ```
  cat /etc/fstab
  
  定义存储设备文件信息	挂载点
  ```



##### 查看存储设备文件信息

```
blkid
```



##### 如何修改主机名称

- 临时修改

  ```
  #显示主机名
  hostname
  #修改主机名
  hostname 修改后的临时主机名
  ```

- 永久修改

  - centos7:
  
    ```
    vi /etc/hostname
    ```
  
    - 重启系统后生效
  - centos6:
  
    ```
    vi /etc/sysconfig/network
    ```

- centos7既可以临时修改也可以永久修改

  ```
  hostnamectl set-hostname 修改后的主机名
  ```

  

##### 查看系统信息

```
cat /etc/redhat-release
```



##### 开机自动加载文件

```
vi /etc/rc.local
将此命令systemctl start sshd 写入后（新一行），开机就自动启动sshd
```



##### 设置权限(有x文件里面内容才会生效)chmod

- 根据用户信息进行设定（属主、属组、其他用户）

  - 属主-user u

  - 属组-group g

  - 其他用户-other o

    ```
    chmod u+r/w/x 1.txt
    chmod g-r/w/x 1.txt 
    chmod u=rw 1.txt
    ```

- 根据用户批量设置

  - 数值设定

    ```
    chmod 755 1.txt
    ```

  - 字符设定

    ```
    #全部角色为x的权限
    chmod a=x 1.txt
    ```




##### 设置特殊权限位

文件数据看到的有9个权限位，系统中实际应该有12个权限位

- setuid

  ```
  chmod u+s 文件信息
  chmod 4755 文件信息
  在属主权限位多出s信息
  ```

  - 将文件属主拥有的能力分配给所有人

- setgid：将文件的属组拥有的能力分配给所有用户组

- sticky bit：粘滞位：(共享目录)

  - 可以将不同用户信息放置到共享目录中，实现不同用户数据可以互相查看，但不可以互相随意修改

    ```
    chmod o+t 目录
    或
    chmod 1777 目录
    ```

  - 系统中默认有一个共享目录：/tmp



##### 如何防范系统中的重要文件不被修改（root用户也不能修改）

- 给文件加锁，使root用户也不能直接修改相应文件

  - 设置

    ```
    chattr +i /etc/passwd
    ```

  - 解锁

    ```
    chattr -i /etc/passwd
    ```

  - 查看

    ```
    lsattr /etc/passwd
    ```

  - 防范

    ```
    which chattr
    然后
    mv chattr 重命名
    放到自己知道的一个位置和自己知道的名字
    
    别人就不知道你这个命令在哪了 就执行不了了
    ```

    

  



##### /etc/rc.local文件作用

- 文件中的内容信息，会在系统启动之后进行加载
- 文件中的编写内容，一定是命令信息



##### 系统运行的级别

- 查看

  - runlevel

- 临时修改

  - init 级别数字

- 永久修改

  - 查看tarhet级别名名称

    ```
    cd  /usr/lib/systemd/system/
    ls -l | grep runlevel
    
    0:poweroff.target
    1:rescue.target
    2:multi-user.target
    3:multi-user.target
    4:multi-user.target
    5:graphical.target
    6:reboot.target
    ```

  - 有->后面的就是级别名名称

  - 永久修改：systemctl set-default 级别名

  - 查看修改后级别：systemctl set-default

- 级别

  - 0：系统的关机

  - 1： 系统的单用户模式  用于修复系统或重置密码

  - 2：系统的多用户模式  没有网络

  - 3：系统的多用户模式 正常系统运行级别 有网络

  - 4：预留级别

  - 5：图形化级别

  - 6：系统的重启级别



##### 查看磁盘挂载情况/查看磁盘使用情况

```
df -h：查看block使用情况
df -i：查看inode使用情况
```



##### 查看系统设置的别名

```
alias
```



##### 给命令设置别名

```
alias 别名='命令'

alias catnet='cat /etc/hostname'
```



##### 别名如何永久设置

- vi /etc/profile

  ```
  alias rm="echo command not exec"
  ```

- source /etc/profile

- 修改家目录下/root/.bashrc的隐藏文件.bashrc 将 rm那一行注释掉，每次rm就生效的profile里面的rm

- 总结
  - /etc/profile == /etc/bashrc	国法（所有用户都能访问到里面设置的变量）
  - ~/.bashrc == ~/.bash_profile  家规（只有root用户可以访问里面设置的变量）



##### 取消别名

```
unalias 别名

#利用撬棍使rm别名失效
\rm -rf /oldboy

#绝对路径的方式使用
/usr/bin/rm -rf /oldboy
```



##### 登陆之后的提示文件/etc/motd

- 可以对操作系统的用户进行注意事项说明



##### 登陆之前提示文件 /etc/issue或/etc/issue.net



##### 如何清空文件内容

```
>/etc/issue
```



##### 系统中如何安装软件

- 订餐点外卖（做好了的）  yum安装软件，简单快捷

  - 解决软件依赖关系（成品）
  - 不能灵活定制化（不能指定安装路径）

  ```
  yum install -y 软件包名
  ```
- 买半成品（速冻饺子） rpm安装软件 需要有软件安装包

  - 单独安装软件（半成品）
  - 不能解决依赖

  ```
  rpm  -ivh 软件包名称.rpm
  ```
- 自己做饭（食材） 编译安装软件，可以灵活调整

  - 单独定制安装软件
  - 不能解决依赖关系 

  ```
  ./configure && make && make install
  ```

  

##### Linux系统指定使用软件仓库文件，yum源文件

- 本地配置yum源

  ```
  https://opsx.alibaba.com/mirror
  点centos帮助
  使用curl 命令
  作用：
  从阿里云下载一个yum文件，更新默认的/etc/yum.repos.d/CentOS-Base.repo
  ```

- 安装软件

  ```
  yum install vim
  
  #-y 不用每次确认，多个包之间空格隔开
  yum install -y tree wget net-tools nmap bash-completion
  ```


- 查看可用的yum源

  ```
  yum repolist
  ```


- 可以安装和已安装的所有软件

  ```
  yum list
  ```

- 可以安装和已安装的所有软件包组信息

  ```
  yum grouplist
  ```

- 安装软件包组的方法

  ```
  yum groupinstall -y Development Tools
  ```

- 卸载包

  ```
  #将依赖包也卸载了 极其不建议
  yum erase cowsay -y
  
  #建议使用rpm卸载，只卸载这个包，不卸载它的其他依赖包
  rpm -e 软件包名 --nodeps
  
  --nodeps：解决有依赖包在使用这个包
  ```
  
- 查看一个命令属于哪个大礼包

  ```
  yum provides locate
  ```
  
  



##### yum安装软件出现问题，排错流程

- 访问外网ip地址不通
  - 网卡地址配置有问题
- 访问外网名称不通
  - DNS配置有问题
    - ping DNS的ip
    - 如果不通进行修改，在本地查看网络以太网的DNS是多少
- 检查是否已经有下载的进程了
  - 会报错一个pid号



##### 查看进程

```
ps -ef 等价于windows任务管理器进程信息
PID称为进程编号
```



##### 杀死进程

```
强制杀死进程
kill -9 PID号
```



##### 查看文件的头/后面几行内容

```
head -5 /etc/profile	##查看前五行数据

tail -6 /etc/profile	##查看倒数六行，不置顶就默认查看后十行


###一直追踪查看文件内容的变化
tail -f /var/secure 

tail -f和-F之间的区别
-f：文件删除或移走，需要进行重新追踪
-F：文件删除或移走不需要重新追踪，只要文件恢复过来会继续追踪

日志文件：文件数据会不断增加
```



##### 系统硬件信息查看方法

- 利用文件查看

  ```
  #CPU
  cat /proc/cpuinfo
  
  CPU品牌型号
  model name:...
  
  physcial id有几个不同的id就代表有几颗cpu
  一个id有几个代表一个cpu有几个核心
  
  有两颗cpu--> 2路服务器
  有4核心（一个cpu有两个核心）
  
  
  
  #内存 memory
  cat /proc/meminfo
  
  MemTotal:..		内存总的容量
  MemFree:..		内存的空闲容量 可用+buffer+cache
  MemAvailable:..	内存的可用容量
  BUffers:..			缓冲区
  Cached:..				缓存区
  SwapCached:..		交换分区使用情况
  
  #磁盘
  cat /proc/mounts
  
  #负载
  cat /proc/loadavg
  0.00 			   0.01 			    0.05
  1分钟平均负载  5分钟平均负载   15分钟平均负载
  
  负载值与cpu核数有关：
  4核--负载值在3左右就要关注
  128核--负载在100都没事
  ```

  

- 利用命令查看

  ```
  #CPU
  lscpu
  
  Scoket(s):..	后面是几就是cpu有几颗
  COre（s） per socket: ..每个cpu有几核
  CPU（s）：..  整个服务器有几核
  
  
  #负载：CPU处理任务过多
  w
  第一个数值表示1分钟内系统的平均负载值；第二个数值表示5分钟内系统的平均负载值；第三个数值表示15分钟系统的平均负载值。这个值的意义是，单位时间段内CPU活动进程数。当然这个值越大就说明服务器压力越大。一般情况下这个值只要不超过服务器的cpu数量就没有关系，如果服务器cpu数量为8，那么这个值若小于8，就说明当前服务器没有压力，否则就要关注一下了。
  
  #内存 memory
  free -h
  
  total：系统的总内存
  used：应用程序已经使用的内存
  free：当前还没有被使用的内存
  shared：共享链接库使用的内存
  buff/cache：系统的page cache和buffer使用到的内存
  avaliable：应用程序还可以申请到的内存（可用的内存）
  
  系统当前使用内存：used+buff/cache，used中包含了shared
  系统当前总内存：total=used+buff/cache+free
  
  avaliable<=free+buff/cache：系统的一些page或cache是不能回收的
  
  #磁盘
  df -h
  ```



##### 添加用户

```
useradd 用户名

#创建多个用户
for num in {01..20};do useradd oldgirl$num;done
```



##### 修改密码

```
#修改当前用户密码
passwd

#修改指定用户的密码
passwd 用户名

#免交互设置密码
echo 123456 | passwd --stdin oldgirl01
```



##### 切换用户

```
su - 用户名
```



##### 检查创建的用户是否存在

```
id 用户名

#检查多个用户
for num in {01..20};do id oldgirl$num;done
```



##### 确认用户身份

```
whoami
```



##### 创建用户同时设置密码信息

```
useradd olddog;echo 123456 | pwsswd --stdin olddog
```





##### 下载wget

```
wget 下载链接
下载的东西在当前目录

wget -O 文件路径 下载链接
下载的东西保存在指定的路径下
```



##### curl

```
#展示爬取过程
curl -v www.baidu.com

#输入账号密码
curl 网址 -u user:password

#跟随重定向到最后的页面获取内容
curl -L 网址
```





##### rpm

```
rpm -qa sl 查看软件包是否存在

rpm -ql sl 查看软件包有哪些东西



rpm -qf `which ssh` 查看系统文件中是属于哪个软件包

q：query 查询
a：all 所有
l：list 列表显示
f；file 文件rpm -qa sl 查看软件包是否存在

rpm -ql sl 查看软件包有哪些东西

q：query 查询
a：all 所有
l：list 列表显示

#卸载单个软件包，不卸载依赖包。yum erase 软件包名会把依赖包也卸载了
rpm -e 软件包名 --nodeps

e：erase 抹除
--nodeps：解决有依赖包在使用这个包

rpm  -ivh 软件包名称.rpm
```



##### ss==netstat

```
ss -lntup

-l list 		 列表显示
-n number    显示端口号
-t tcp			 显示tcp网络协议
-u udp       显示udp网络协议
-p process		 进程信息显示出来

如何有netstat命令
yum instll -y net-tools

```



##### tr修改文件内容：一对一进行替换

```
echo 123 | tr "123" "abc"
abc

1:a
2:b
3:c

如果替换前的内容字符长度跟替换后内容的字符长度不一样就会有问题

#将test.txt文件中的小写字母转为大写输出，文件内容不会修改
tr "a-z" "A-Z" > /test.txt
```

- 替换的内容字符数>被替换的内容字符数

  ```
  echo abcd | tr "abcd" "123"
  1233
  a:1
  b:2
  c:3
  d:3
  ```

- 替换的内容字符数<被替换的内容字符数

  ```
  echo abcd | tr "abc" "1234"
  123d
  ```

- 特殊情况：前后替换有重复

  ```
  echo abcba | tr "abcba" "12345"
  54345
  
  a-1
  b-2
  c-3
  b-4
  a-5
  ```

  

##### 显示目录结构信息：tree

- 显示指定目录中的所有数据和所有结构信息

  ```
  tree /oldboy
  ```

- 查看目录结构层级信息

  ```
  #只显示两级目录
  tree -L 2 /
  ```

- 只显示目录结构

  ```
  tree -d /oldboy
  ```



##### 系统中如何对文件进行压缩处理：tar

- 语法

  ```
  tar zcvf /oldboy/old.tar.gz 指定要压缩的文件
  
  z：压缩的方式为zip
  c：创建压缩包文件
  v：显示压缩的过程
  f：指定压缩包文件路径信息
  f一定要写在最后
  ```

- 检查是否压缩成功

  - 将原文件先进性移走,防止解压后覆盖原文件

    ```
    mv /oldboy/services /tmp
    ```

  - 解压数据包

    ```
    tar xvf /oldboy/old.tar.gz
    
    x:extract 提取，解压包
    C:指定解压后文件的路径
    
    tar xvfC  1.txt.tar.gz /www/
    ```

  - 检查解压后的文件和原文件是否一样

    - diff

      ```
      diff /oldboy/oldboy/old /tmp/old
      #如果一致不报任何信息
      #如果不一致会出现提示
      前面文件的行数a后面文件的行数
      结果
      ```

    - vimdiff

      ```
      vimdiff /oldboy/oldboy/old /tmp/old
      ```

- 在不解压的情况下查看压缩包里面的数据

  ```
  tar tf /old.tar.gz
  ```

- 压缩过程信息说明

  ```
  tar：Removing leading '/' from member names
  默认将压缩时绝对路径的根信息就行移除
  
  用相对路径进行压缩的时候就不会进行提示，解压后也没有绝对路径的目录结构 
  ```

- 在压缩文件的时候将有些文件不进行压缩

  ```
  tar zcvf /tmp/old.tar.gz ./oldboy --exclude=./oldboy/1.txt
  
  exclude 排除
  include 包含
  要进行压缩的文件和要排除的文件要么都用绝对路径，要么都是相对路径，不然会排除失败
  ```

- 在压缩文件的时候批量文件不进行压缩

  - 编写好排除文件
  
    ```
    vim /tmp/exclude.txt
    /oldboy/1.txt
    /oldboy/1.png
    /oldboy/1.jpg
    ```
  
  - 执行命令进行批量排除
  
    ```
    tar zcvf /tmp/old.tar.gz /oldboy --exclude-from=/tmp/exclude.txt
    ```
  
    
  

##### 查看文件的三种时间stat

```
stat 文件

访问时间：access time
修改时间：modify time
改变时间：change time
```



##### xargs：将信息分组显示

```
seq 5 > 1.txt

cat 1.txt
1
2
3
4
5

cat 1.txt | xargs 等价于 xargs < 1.txt
1 2 3 4 5

cat 1.txt | xargs -n2 等价于 xargs -n2 < 1.txt
1 2
3 4
5

echo {1..5} > 2.txt

cat 2.txt
1 2 3 4 5

cat 2.txt | xargs
1 2 3 4 5

cat 2.txt | xargs -n1
1
2
3
4
5

cat 2.txt | xargs -n2
1 2
3 4
5
```



##### 时间相关命令 ：date

- 查看时间

  ```
  date
  ```

- 调整时间显示格式

  ```
  date "+%F %T"
  
  F:年月日
  T：时分秒
  
  date "+%y-%m-%d %H:%M:%S"
  ```

- 根据日期命令进行命名

  ```
  cp old.log old-`date "+%F_%T"`.log.bak
  ```

- 修改时间

  ```
  date -s "2022/12/15 10:52:01"
  ```

- 获取之后的时间

  ```
  #一天后的时间
  date +%F -d "+1day"
  ```

- 获取之前的时间

  ```
  #两天前的时间
  date +%F -d "-2day"
  ```

- 系统自动备份数据

  ```
  如果设置自动备份的时间是每天的00:00，那看的日志日期文件就是前一天的日志
  cp /old.log /log/old.log.`date +%F`
  需要进行调整，哪天的就是哪天的日志
  cp /old.log /log/old.log.`date +%F -d "-1day"`
  ```

- 同步时间

  ```
  yum install -y ntpdate
  
  ntpdate ntp.aliyun.com
  ```

  



##### 真正统计文件的大小：du，不加-a只统计目录的

```
#统计当前目录下的目录大小
[root@pert login]# du --max-depth=1 -h `pwd`

#统计当前目录下目录和文件的大小，会往里面延伸一层
[root@pert login]# du --max-depth=2 -ah `pwd`


--max-depth:1为当前目录，2会往下延伸一层
-h：可视化显示大小
-a：将文件也显示出来，不加只显示目录的大小



#统计当前目录下的各个目录和文件大小
[roc@roclinux ruanjian]$ du -sh *
3.4M    curl-7.34.0.tar.gz
41M     soft
6.8M    wordpress-4.4.1.tar.gz

-s：只统计当前目录的，相当于 --max-depth=1并且只显示当前目录所占的总大小，如果后面加上* 就相当于--max-depth=1 -ah


#统计当前目录下的各个目录和文件的大小，并计算出总和
[roc@roclinux ruanjian]$ du -ch *.tar.gz
3.4M    curl-7.34.0.tar.gz
6.8M    wordpress-4.4.1.tar.gz
11M     总用量

-c:统计出各个目录占的总量
```



##### 生成序列seq

```
seq 5
1
2
3
4
5

seq -w 5
01
02
03
04
05
```



##### 修改文件的属主、属组

```
chown 属主.属组 文件

递归设置属主属组，目录里的文件也都改了
chown -R 属主.属组 目录
```



##### 修改文件权限

```
chmod 000 文件/目录

#其他用户添加x权限
chmod o+x 文件/目录
```



##### 用户信息查看

- id：显示用户命令信息

- w：正在登录系统的用户信息

  ```
  [root@pert ~]# w
  USER：什么用户登录到了系统中
  TTY：登陆的方式
  	pts/x 远程登录系统	x可以是1 2 3。。。
  	tty1	本地登录
  	#通知其他用户屏幕上显示你要提醒的信息
  	echo "请不要修改hosts文件配置" > /dev/pts/1
  	
  FROM：从哪连接的服务器
  LOGIN@：登陆时间
  IDLE：空闲时间
  PCPU、JCPU：用户操作系统消耗的cpu资源时间
  WHAT：用户在干什么/bash或/sh或。。。
  ```

- last

  ```
  显示历史登录用户的信息
  ```

- lastlog

  ```
  显示/etc/passwd里面的用户登录过的信息（失败、成功）
  ```

  



##### lrzsz：windwos和linux的文件进行相互传输

```
yum install -y lrzsz
将windows文件传到linux
rz -y

将linux文件传到windows
sz -y 文件
```



##### sort排序

```
cat num.txt
11
2
13
22

#默认只对第一列进行排序
cat num.txt | sort
11
13
2
22

#对整体数字进行排序
cat num.txt | sort -n
2
11
13
22

#如果不是纯数字将无效需要加-k
cat num.txt ｜ sort -n -k2
#2
#11
#13
#22

#找出大的数据
du -sh /* | sort -h 
```



##### 模拟创建出指定大小的文件dd

```
dd if=/dev/zero of=/mount01/t.txt bs=10M count=30

从哪取出数据
放到哪
一个块多大
这个文件有多少个块
```



##### umask：目录：755、文件：644

```
umask
0022
```

临时修改umask数值

```
umask 033
```

默认文件权限：666-022=644

- umask数值是奇数
  - 666-033=633+11=644
- umask数值是偶数
  - 666-022=644

默认目录权限：777-022=755

- umask数值是奇数
  - 777-033=744
- umask数值是偶数
  - 777-022=755



##### 定时任务：crontab

- 查看

  ```
  crontab -l
  ```

- 编写

  ```
  crontab -e 编写定时任务
  vi /var/spool/cron/定时任务配置文件保存目录
  ```

- 定时任务配置设置

  ```
  /var/spool/cron/root
  root文件表示是root用户设置的定时任务
  ```

- 服务环境准备：服务是否启动

  ```
  systemctl status crond
  ```

- 配置定时任务：crontab -e



##### wc

```
wc [-clw][--help][--version][文件...]
```

**参数**：

- -c或--bytes或--chars 只显示Bytes数。
- -l或--lines 显示行数。
- -w或--words 只显示字数。

